<ion-header class="ion-no-border header-border">
  <ion-toolbar class="ion-no-border">
    <ion-title>
      <adj-organisation></adj-organisation>
    </ion-title>
    <ion-buttons slot="end">
      <adj-user-profile></adj-user-profile>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-header class="ion-no-border header-border">
  <ion-toolbar class="ion-no-border">
    <ion-buttons slot="start">
      <ion-button (click)="close();">
        <ion-icon name="arrow-back-outline" slot="icon-only"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Outlet Health Score</ion-title>
  </ion-toolbar>
</ion-header>

<div>
  <ion-list class="toggle-list">
    
    <ion-item class="ratype_class">
      <ion-label class="toggle-lable">Branch</ion-label>
      <ion-toggle (ionChange)="ChangeMarket($event)" value="showByMarket"></ion-toggle>
      <ion-label >Market</ion-label>
    </ion-item>
    <ion-item class="branch_toggle" >
        <ion-label >Branch</ion-label>
        <ion-toggle (ionChange)="ChangeMonth($event)" value="showByMonth"></ion-toggle>
        <ion-label  class="toggle-lable">Month</ion-label>

      </ion-item>
  </ion-list>
</div>



<div class="table-scroll">
  <div *ngIf="results">
    <div class="ion-padding-horizontal">
      <div class="ion-padding-bottom mild small-font" *ngIf="totalRecords">
        {{'Total Records' | uppercase}} - {{totalRecords}}
      </div>
      <ion-grid class="ion-no-padding adjoint-data-grid mat-elevation-z2 boder-box white-bg">
        <ion-row class="grid-header sticky-header">

          <ion-col *ngIf="monthGroup == '0'"><span>{{'District'}}</span></ion-col>
          <ion-col *ngIf="monthGroup == '0'"><span>{{'Branch'}}</span></ion-col>
          <ion-col *ngIf="monthGroup == '1'"><span>{{'Visited Month'}}</span></ion-col>
          <ion-col *ngIf="marketGroup == '1'"><span>{{'Market'}}</span></ion-col>
          <ion-col><span>{{'Backwall'}}</span></ion-col>
          <ion-col><span>{{'Counter'}}</span></ion-col>
          <ion-col><span>{{'Ed'}}</span></ion-col>
          <ion-col><span>{{'Health Score'}}</span></ion-col>
          <ion-col><span>{{'Pillar'}}</span></ion-col>
          <ion-col><span>{{'Total PJP Outlets'}}</span></ion-col>

        </ion-row>
        <ion-row *ngFor="let visit of results" 
        [ngClass]="{'totalSumRow':visit.regionSum, ' rowHighlight':visit.totalSum, 'sticky-totalsum-row':visit.totalSum}"
        class="white-bg ion-align-items-center">

          <ion-col *ngIf="monthGroup == '0'">
            <div>
              <div>{{visit.region}}</div>
            </div>
          </ion-col>
          <ion-col *ngIf="monthGroup == '0'">
            <div>{{visit.branch}}</div>
          </ion-col>
          <ion-col *ngIf="monthGroup == '1'">
            <div>
              {{visit.visited_month}}
            </div>
            <div *ngIf="visit.totalSum">
                PAN INDIA TOTAL : 
              </div>
          </ion-col>
          <ion-col *ngIf="marketGroup == '1'">
            <div>{{visit.market_name}}</div>
          </ion-col>
          <ion-col>
            <div>{{visit.backwall}}</div>
          </ion-col>
          <ion-col>
            <div>{{visit.counter}}</div>
          </ion-col>
          <ion-col>
            <div>{{visit.ed}}</div>
          </ion-col>
          <ion-col>
            <div>{{visit.health_score}}</div>
          </ion-col>
          <ion-col>
            <div>
              {{visit.pillar}}
            </div>
          </ion-col>
          <ion-col>
            <div>{{visit.total_pjp_outlets}}</div>
          </ion-col>


        </ion-row>
      </ion-grid>
    </div>


  </div>

</div>