(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{GwlF:function(e,t,n){"use strict";n.r(t),n.d(t,"UserManagementPageModule",(function(){return me}));var r=n("ofXK"),o=n("3Pt+"),i=n("TEn/"),a=n("tyNb"),l=n("mrSG"),s=n("VfN6"),m=n("6UR0"),d=n("S3p7"),c=n("jrR7"),u=n("BKks"),p=n("fXoL"),h=n("hrw+"),v=n("jMvV");const f=["locations"],S=["roles"],g=["groups"],b=["manager"];let E=(()=>{let e=class{constructor(e,t,n,r,o){this.baseAPI=e,this.loadingCntrl=t,this.formBuilder=n,this.popoverService=r,this.inputData=o,this.apiDirectory=u.c,this.preferredCountry=["in"]}ngOnInit(){this.formGroup=this.intialiseForm(),this.popoverService.userSettings.settings.pipe(Object(s.b)(this)).subscribe(e=>{console.log("in"),this.preferredCountry=["in".toLowerCase()]})}ngAfterViewInit(){this.disableLocationSelection()}intialiseForm(){return this.formBuilder.group({user_id:["",o.u.required],name:["",o.u.required],role_id:["",o.u.required],place_id:["",o.u.required],manager_id:[""],mobile_number:["",[o.u.required]],date_joined:[""],password:["",o.u.required],groups:this.formBuilder.array([])})}get mobileControl(){return this.formGroup.get("mobile_number")}get roleControl(){return this.formGroup.get("role_id")}get locationControl(){return this.formGroup.get("place_id")}get groupControl(){return this.formGroup.get("groups")}get managerControl(){return this.formGroup.get("manager_id")}close(e=null,t="closed"){this.inputData.data.onClose(e,t)}getData(){const e=Object.assign({},this.formGroup.value);return e.date_joined==Object(c.k)(e.date_joined.format)&&e.date_joined.format(c.a),e.groups=e.groups.map(e=>e.id),e}submitForm(){return Object(l.a)(this,void 0,void 0,(function*(){if(this.formGroup.valid){const e=this.getData(),t=yield this.loadingCntrl.create({message:"Submitting..."});t.present(),this.baseAPI.executePost({url:u.c.user,body:e}).subscribe(e=>{t.dismiss(),this.close(e,"selected"),this.popoverService.showToast("The user has been created successfully.",1500,["success-toast"])},e=>{console.log(e),t.dismiss(),this.popoverService.showToast("The user could not be created. Please try later.",1500,["error-toast"])})}}))}handleRoleSelection(e){this.roleControl.markAllAsTouched(),this.roleControl.setValue(e?e.role_id:""),this.locationMS.reset(),this.locationControl.setValue(""),(null==e?void 0:e.role_id)&&(null==e?void 0:e.role_id)>0?(this.locationMS.disabled=!1,this.reloadLocations(e)):this.disableLocationSelection()}disableLocationSelection(){setTimeout(()=>{this.locationMS.disabled=!0,this.locationMS.disabledMessage="Please select a role to enable location selection"})}reloadLocations(e){}handleLocationSelection(e){this.locationControl.markAllAsTouched(),this.locationControl.setValue(e?e.id:"")}handleGroupSelection(e){const t=this.groupControl;t.clear(),e.forEach(e=>{t.push(this.formBuilder.group(e))}),t.markAllAsTouched()}handleManagerSelection(e){this.managerControl.markAllAsTouched(),this.managerControl.setValue(e?e.id:"")}};return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](h.a),p["\u0275\u0275directiveInject"](i.I),p["\u0275\u0275directiveInject"](o.d),p["\u0275\u0275directiveInject"](v.a),p["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-add-user"]],viewQuery:function(e,t){var n;1&e&&(p["\u0275\u0275viewQuery"](f,!0,m.a),p["\u0275\u0275viewQuery"](S,!0,m.a),p["\u0275\u0275viewQuery"](g,!0,m.a),p["\u0275\u0275viewQuery"](b,!0,m.a)),2&e&&(p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.locationMS=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.roleMS=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.groupMS=n.first),p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.managerMS=n.first))},decls:0,vars:0,template:function(e,t){},styles:["[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}  button.country-selector{margin-left:-12px}"]}),e=Object(l.b)([Object(s.a)()],e),e})();var y=n("7vyj"),w=n("2Q4r"),x=n("he5r"),I=n("pmdr");class C extends I.a{copy(){return Object.assign(new C,this)}toQureryMap(){const e=new Map;return e.set("groups",this.nullOrPrimaryKeys(this.groups,e=>e.id)),e.set("role",this.role?this.role.role_id:null),e.set("manager",this.manager?this.manager.id:null),e.set("place",this.place?this.place.id:null),e}}var j=n("kmnG"),_=n("qFsG");let O=(()=>{class e{constructor(e,t,n,r,o){this.baseAPI=e,this.loadingCntrl=t,this.formBuilder=n,this.popoverService=r,this.inputData=o}ngOnInit(){this.user=this.inputData.data.parameters.user,this.formGroup=this.formBuilder.group({name:[this.user.name,o.u.required],user_id:[this.user.user_id,o.u.required],password:["",o.u.required]})}ngAfterViewInit(){}close(e=null,t="closed"){this.inputData.data.onClose(null,t)}submitForm(){return Object(l.a)(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),this.formGroup.valid){const e=yield this.loadingCntrl.create({message:"Submitting..."});e.present(),this.baseAPI.executePatch({url:`${u.c.user}${this.user.id}/`,body:this.formGroup.value}).subscribe(t=>{e.dismiss(),this.close(t,"selected"),this.popoverService.showToast("The password has been updated successfully.",x.h,["success-toast"])},t=>{console.log(t),e.dismiss(),this.popoverService.showToast("The password could not be updated. Please try later.",x.h,["error-toast"])})}}))}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](h.a),p["\u0275\u0275directiveInject"](i.I),p["\u0275\u0275directiveInject"](o.d),p["\u0275\u0275directiveInject"](v.a),p["\u0275\u0275directiveInject"](d.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-password-change"]],decls:45,vars:3,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","start"],[3,"click"],["name","close","slot","icon-only"],["slot","end"],["name","send-outline","slot","start"],[1,"ion-padding","white-bg"],[3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","type","text","formControlName","name",3,"readonly"],["matInput","","type","text","formControlName","user_id",3,"readonly"],["matInput","","type","password","formControlName","password"],[1,"ion-padding"],["type","submit","expand","block"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-header",0),p["\u0275\u0275elementStart"](1,"ion-toolbar",1),p["\u0275\u0275elementStart"](2,"ion-buttons",2),p["\u0275\u0275elementStart"](3,"ion-button",3),p["\u0275\u0275listener"]("click",(function(){return t.close()})),p["\u0275\u0275element"](4,"ion-icon",4),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"ion-title"),p["\u0275\u0275text"](6,"Change Password"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](7,"ion-buttons",5),p["\u0275\u0275elementStart"](8,"ion-button",3),p["\u0275\u0275listener"]("click",(function(){return t.submitForm()})),p["\u0275\u0275element"](9,"ion-icon",6),p["\u0275\u0275text"](10," Submit "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"ion-content"),p["\u0275\u0275elementStart"](12,"div",7),p["\u0275\u0275elementStart"](13,"form",8),p["\u0275\u0275listener"]("ngSubmit",(function(){return t.submitForm()})),p["\u0275\u0275elementStart"](14,"ion-grid"),p["\u0275\u0275elementStart"](15,"ion-row"),p["\u0275\u0275elementStart"](16,"ion-col"),p["\u0275\u0275elementStart"](17,"mat-form-field",9),p["\u0275\u0275elementStart"](18,"mat-label"),p["\u0275\u0275text"](19,"User Name"),p["\u0275\u0275elementStart"](20,"sup"),p["\u0275\u0275text"](21,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](22,"input",10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](23,"ion-row"),p["\u0275\u0275elementStart"](24,"ion-col"),p["\u0275\u0275elementStart"](25,"mat-form-field",9),p["\u0275\u0275elementStart"](26,"mat-label"),p["\u0275\u0275text"](27,"User ID"),p["\u0275\u0275elementStart"](28,"sup"),p["\u0275\u0275text"](29,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](30,"input",11),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](31,"ion-row"),p["\u0275\u0275elementStart"](32,"ion-col"),p["\u0275\u0275elementStart"](33,"mat-form-field",9),p["\u0275\u0275elementStart"](34,"mat-label"),p["\u0275\u0275text"](35,"Password"),p["\u0275\u0275elementStart"](36,"sup"),p["\u0275\u0275text"](37,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](38,"input",12),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](39,"ion-row"),p["\u0275\u0275elementStart"](40,"ion-col"),p["\u0275\u0275elementStart"](41,"div",13),p["\u0275\u0275elementStart"](42,"ion-button",14),p["\u0275\u0275element"](43,"ion-icon",6),p["\u0275\u0275text"](44,"Submit "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](13),p["\u0275\u0275property"]("formGroup",t.formGroup),p["\u0275\u0275advance"](9),p["\u0275\u0275property"]("readonly",!0),p["\u0275\u0275advance"](8),p["\u0275\u0275property"]("readonly",!0))},directives:[i.l,i.F,i.e,i.d,i.m,i.D,i.i,o.v,o.p,o.h,i.k,i.x,i.h,j.b,j.e,_.b,o.c,o.o,o.g],styles:["[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})();var k=n("lJxs"),M=n("N/Ph"),A=n("iadO"),D=n("bSwM");function P(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-buttons",8),p["\u0275\u0275elementStart"](1,"ion-button",3),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"]().submitForm()})),p["\u0275\u0275element"](2,"ion-icon",9),p["\u0275\u0275text"](3," Submit "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}}function N(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"ion-col"),p["\u0275\u0275elementStart"](1,"mat-form-field",12),p["\u0275\u0275elementStart"](2,"mat-label"),p["\u0275\u0275text"](3,"Mobile Number"),p["\u0275\u0275elementStart"](4,"sup"),p["\u0275\u0275text"](5,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](6,"input",20),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("readonly",e.mode==e.VIEW_MODE)}}function F(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-col"),p["\u0275\u0275elementStart"](1,"mat-form-field",12),p["\u0275\u0275elementStart"](2,"mat-label"),p["\u0275\u0275text"](3,"Mobile Number"),p["\u0275\u0275elementStart"](4,"sup"),p["\u0275\u0275text"](5,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]())}function T(e,t){1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"ion-row"),p["\u0275\u0275elementStart"](2,"ion-col"),p["\u0275\u0275elementStart"](3,"mat-form-field",12),p["\u0275\u0275elementStart"](4,"mat-label"),p["\u0275\u0275text"](5,"Role"),p["\u0275\u0275elementStart"](6,"sup"),p["\u0275\u0275text"](7,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](8,"input",21),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"ion-row"),p["\u0275\u0275elementStart"](10,"ion-col"),p["\u0275\u0275elementStart"](11,"mat-form-field",12),p["\u0275\u0275elementStart"](12,"mat-label"),p["\u0275\u0275text"](13,"Location"),p["\u0275\u0275elementStart"](14,"sup"),p["\u0275\u0275text"](15,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](16,"input",22),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](17,"ion-col"),p["\u0275\u0275elementStart"](18,"mat-form-field",12),p["\u0275\u0275elementStart"](19,"mat-label"),p["\u0275\u0275text"](20,"Device ID"),p["\u0275\u0275elementStart"](21,"sup"),p["\u0275\u0275text"](22,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](23,"input",23),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](24,"ion-row"),p["\u0275\u0275elementStart"](25,"ion-col"),p["\u0275\u0275elementStart"](26,"mat-form-field",12),p["\u0275\u0275elementStart"](27,"mat-label"),p["\u0275\u0275text"](28,"Approved By"),p["\u0275\u0275elementStart"](29,"sup"),p["\u0275\u0275text"](30,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](31,"input",24),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]()),2&e&&(p["\u0275\u0275advance"](8),p["\u0275\u0275property"]("readonly",!0),p["\u0275\u0275advance"](8),p["\u0275\u0275property"]("readonly",!0),p["\u0275\u0275advance"](7),p["\u0275\u0275property"]("readonly",!0),p["\u0275\u0275advance"](8),p["\u0275\u0275property"]("readonly",!0))}const U=function(e){return{"form-error":e}},V=function(){return[]};function G(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"ion-row"),p["\u0275\u0275elementStart"](2,"ion-col"),p["\u0275\u0275elementStart"](3,"div",25),p["\u0275\u0275elementStart"](4,"div",26),p["\u0275\u0275text"](5,"Role"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"adj-multi-select",27,28),p["\u0275\u0275listener"]("selected",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).handleRoleSelection(t)})),p["\u0275\u0275pipe"](8,"async"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](9,"ion-row"),p["\u0275\u0275elementStart"](10,"ion-col"),p["\u0275\u0275elementStart"](11,"div",25),p["\u0275\u0275elementStart"](12,"div",26),p["\u0275\u0275text"](13,"Location"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](14,"adj-multi-select",29,30),p["\u0275\u0275listener"]("selected",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).handleLocationSelection(t)})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](16,"ion-row"),p["\u0275\u0275elementStart"](17,"ion-col"),p["\u0275\u0275elementStart"](18,"div",25),p["\u0275\u0275elementStart"](19,"div",26),p["\u0275\u0275text"](20,"Groups"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](21,"adj-multi-select",31,32),p["\u0275\u0275listener"]("selected",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).handleGroupSelection(t)})),p["\u0275\u0275pipe"](23,"async"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](24,"ion-row"),p["\u0275\u0275elementStart"](25,"ion-col"),p["\u0275\u0275elementStart"](26,"div",25),p["\u0275\u0275elementStart"](27,"div",26),p["\u0275\u0275text"](28,"Manager"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](29,"adj-multi-select",33,34),p["\u0275\u0275listener"]("selected",(function(t){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).handleManagerSelection(t)})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]()}if(2&e){const e=p["\u0275\u0275nextContext"](2),t=p["\u0275\u0275reference"](12);var n;const o=null==(n=p["\u0275\u0275pipeBind1"](8,12,e.roles$))?null:n.data;var r;const i=null==(r=p["\u0275\u0275pipeBind1"](23,14,e.groups$))?null:r.data;p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](16,U,(e.roleControl.dirty||e.roleControl.touched)&&e.roleControl.errors)),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("data",o)("multiple",!1),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](18,U,(e.locationControl.dirty||e.locationControl.touched)&&e.locationControl.errors)),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("data",p["\u0275\u0275pureFunction0"](20,V))("multiple",!1),p["\u0275\u0275advance"](4),p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](21,U,(e.groupControl.dirty||e.groupControl.touched)&&e.groupControl.errors)),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("data",i),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("ngClass",p["\u0275\u0275pureFunction1"](23,U,(e.managerControl.dirty||e.managerControl.touched)&&e.managerControl.errors)),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("viewTemplate",t)("url",e.apiDirectory.users)("multiple",!1)}}function R(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275elementStart"](1,"ion-row"),p["\u0275\u0275elementStart"](2,"ion-col"),p["\u0275\u0275elementStart"](3,"div",35),p["\u0275\u0275elementStart"](4,"ion-button",36),p["\u0275\u0275listener"]("click",(function(){return p["\u0275\u0275restoreView"](e),p["\u0275\u0275nextContext"](2).submitForm()})),p["\u0275\u0275element"](5,"ion-icon",9),p["\u0275\u0275text"](6,"Submit "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementContainerEnd"]()}}function q(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"div",10),p["\u0275\u0275elementStart"](2,"form",11),p["\u0275\u0275elementStart"](3,"ion-grid"),p["\u0275\u0275elementStart"](4,"ion-row"),p["\u0275\u0275elementStart"](5,"ion-col"),p["\u0275\u0275elementStart"](6,"mat-form-field",12),p["\u0275\u0275elementStart"](7,"mat-label"),p["\u0275\u0275text"](8,"User Id"),p["\u0275\u0275elementStart"](9,"sup"),p["\u0275\u0275text"](10,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](11,"input",13),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](12,"ion-col"),p["\u0275\u0275elementStart"](13,"mat-form-field",12),p["\u0275\u0275elementStart"](14,"mat-label"),p["\u0275\u0275text"](15,"Name"),p["\u0275\u0275elementStart"](16,"sup"),p["\u0275\u0275text"](17,"*"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](18,"input",14),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](19,"ion-row"),p["\u0275\u0275template"](20,N,7,1,"ion-col",6),p["\u0275\u0275template"](21,F,6,0,"ion-col",6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](22,"ion-row"),p["\u0275\u0275elementStart"](23,"ion-col"),p["\u0275\u0275elementStart"](24,"mat-form-field",12),p["\u0275\u0275elementStart"](25,"mat-label"),p["\u0275\u0275text"](26,"Joining Date"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275element"](27,"input",15),p["\u0275\u0275element"](28,"mat-datepicker-toggle",16),p["\u0275\u0275element"](29,"mat-datepicker",null,17),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](31,T,32,4,"ng-container",6),p["\u0275\u0275template"](32,G,31,25,"ng-container",6),p["\u0275\u0275elementStart"](33,"ion-row"),p["\u0275\u0275elementStart"](34,"ion-col"),p["\u0275\u0275elementStart"](35,"mat-checkbox",18),p["\u0275\u0275text"](36,"Active User "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](37,"p",19),p["\u0275\u0275text"](38,"Active user are allowed to use the mobile application and portal"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](39,"ion-row"),p["\u0275\u0275elementStart"](40,"ion-col"),p["\u0275\u0275elementStart"](41,"mat-checkbox",18),p["\u0275\u0275text"](42,"Staff User "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](43,"ion-row"),p["\u0275\u0275elementStart"](44,"ion-col"),p["\u0275\u0275elementStart"](45,"mat-checkbox",18),p["\u0275\u0275text"](46,"Approve User "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](47,"p",19),p["\u0275\u0275text"](48,"Approved user are allowed to use the mobile application and portal"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](49,R,7,0,"ng-container",6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275reference"](30),t=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("formGroup",t.formGroup),p["\u0275\u0275advance"](9),p["\u0275\u0275property"]("readonly",!0),p["\u0275\u0275advance"](7),p["\u0275\u0275property"]("readonly",!0)("readonly",t.mode==t.VIEW_MODE),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("ngIf",t.mode==t.VIEW_MODE),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.mode==t.EDIT_MODE),p["\u0275\u0275advance"](6),p["\u0275\u0275property"]("matDatepicker",e)("readonly",t.mode==t.VIEW_MODE),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("for",e),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",t.mode==t.VIEW_MODE),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.mode==t.EDIT_MODE),p["\u0275\u0275advance"](17),p["\u0275\u0275property"]("ngIf",t.mode==t.EDIT_MODE)}}function L(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"div"),p["\u0275\u0275text"](2),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](3,"div",37),p["\u0275\u0275text"](4),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e){const e=t.option;p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate"](e.name),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate3"]("",null==e.place?null:e.place.name," ","|"," ",null==e.role?null:e.role.name,"")}}let Q=(()=>{class e extends E{constructor(){super(...arguments),this.mode=x.o,this.VIEW_MODE=x.o,this.EDIT_MODE=x.b}ngAfterViewInit(){setTimeout(()=>{this.mode=this.inputData.data.parameters.mode||x.o;const e=this.inputData.data.parameters.userId;e&&this.loadUserInfo(e)},10)}loadUserInfo(e){this.baseAPI.get({url:""+u.c.user}).pipe(Object(k.a)(e=>{if(this.settings&&this.settings.country_code){const t=this.settings.country_code,n=Object(c.f)(t,e.mobile_number);return Object.assign(Object.assign({},e),{mobile_number:n})}return e})).subscribe(e=>{this.user=e,this.formGroup=this.reIntialiseForm(),this.mode==x.b&&setTimeout(()=>{this.initaliseMultiselect()},10)},e=>this.body.error=e)}reIntialiseForm(){return console.log("Reinitialise Form"+JSON.stringify(this.user.name)),this.formBuilder.group({user_id:[this.user.user_id,o.u.required],name:[this.user.name,o.u.required],role_id:[Object(c.s)(this.user.role,"id"),o.u.required],place_name:[this.user.place.name,o.u.required],mobile_number:[this.user.mobile_number,[o.u.required]],date_joined:[this.user.date_joined,[o.u.required]],device_id:[this.user.device_id,[o.u.required]],manager:[this.user.name,[o.u.required]],is_active:[{value:this.user.is_active,disabled:this.mode==x.o}],groups:this.formBuilder.array(Object(c.i)(this.user.groups)?[]:this.user.groups.map(e=>this.formBuilder.group(e))),role_name:[Object(c.s)(this.user.role,"name")],group_names:[Object(c.i)(this.user.groups)?"":this.user.groups.map(e=>e.name).join()]})}initaliseMultiselect(){console.log("LOC 504");const e=this.user.role,t=e?Object.assign(Object.assign({},e),{role_id:e.id,role_name:e.name}):null;this.roleMS?(this.roleMS.existingValues=t,this.handleRoleSelection(t)):console.log("roleMS not inisitalized"),this.locationMS?(this.locationMS.existingValues=this.user.place,this.locationControl.setValue(this.user.place.id)):console.log("locationMS not inisitalized"),this.groupMS?this.groupMS.existingValues=[...this.user.groups]:console.log("groupsMS not inisitalized")}submitForm(){return Object(l.a)(this,void 0,void 0,(function*(){if(this.formGroup.valid){const e=this.getData(),t=yield this.loadingCntrl.create({message:"Submitting..."});t.present(),this.baseAPI.executePatch({url:`${u.c.user}${this.user.id}/`,body:e}).subscribe(e=>{t.dismiss(),this.close(e,"selected"),this.popoverService.showToast("The user has been updated successfully.",1500,["success-toast"])},e=>{console.log(e),t.dismiss(),this.popoverService.showToast("The user could not be updated. Please try later.",1500,["error-toast"])})}}))}}return e.\u0275fac=function(t){return B(t||e)},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-user-detail"]],viewQuery:function(e,t){var n;1&e&&p["\u0275\u0275viewQuery"](M.a,!0,M.a),2&e&&p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.body=n.first)},features:[p["\u0275\u0275InheritDefinitionFeature"]],decls:13,vars:3,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","start"],[3,"click"],["name","close","slot","icon-only"],["slot","end",4,"ngIf"],[4,"ngIf"],["userTemplate",""],["slot","end"],["name","send-outline","slot","start"],[1,"ion-padding","white-bg"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","user_id",3,"readonly"],["matInput","","formControlName","name",3,"readonly"],["matInput","","formControlName","date_joined",3,"matDatepicker","readonly"],["matSuffix","",3,"for"],["date_joined",""],["formControlName","is_active","color","primary"],[1,"small-font","mild"],["type","text","maxlength","10","matInput","","formControlName","mobile_number",3,"readonly"],["type","text","matInput","","formControlName","role_name",3,"readonly"],["type","text","matInput","","formControlName","place_name",3,"readonly"],["type","text","matInput","","formControlName","device_id",3,"readonly"],["type","text","matInput","","formControlName","manager",3,"readonly"],[1,"multi-select-form-field","ion-margin-vertical",3,"ngClass"],[1,"form-field-label"],["name","roles","mapFn","v=>v","type","local","idPropName","role_id","labelPropName","role_name",3,"data","multiple","selected"],["roles",""],["name","location","mapFn","v=>v","type","local","idPropName","id","labelPropName","name",3,"data","multiple","selected"],["locations",""],["name","groups","mapFn","v=>v","type","local","idPropName","id","labelPropName","name",3,"data","selected"],["groups",""],["name","managers","mapFn","response=>response.results","type","server","idPropName","id","labelPropName","name",3,"viewTemplate","url","multiple","selected"],["manager",""],[1,"ion-padding"],["type","submit","expand","block",3,"click"],[1,"small-font","mild",2,"padding-top","4px"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-header",0),p["\u0275\u0275elementStart"](1,"ion-toolbar",1),p["\u0275\u0275elementStart"](2,"ion-buttons",2),p["\u0275\u0275elementStart"](3,"ion-button",3),p["\u0275\u0275listener"]("click",(function(){return t.close()})),p["\u0275\u0275element"](4,"ion-icon",4),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"ion-title"),p["\u0275\u0275text"](6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](7,P,4,0,"ion-buttons",5),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"ion-content"),p["\u0275\u0275elementStart"](9,"rainbow-body"),p["\u0275\u0275template"](10,q,50,12,"div",6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](11,L,5,4,"ng-template",null,7,p["\u0275\u0275templateRefExtractor"])),2&e&&(p["\u0275\u0275advance"](6),p["\u0275\u0275textInterpolate"](t.title),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",t.mode&&t.mode==t.EDIT_MODE),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("ngIf",t.user))},directives:[i.l,i.F,i.e,i.d,i.m,i.D,r.NgIf,i.i,M.a,o.v,o.p,o.h,i.k,i.x,i.h,j.b,j.e,_.b,o.c,o.o,o.g,A.d,A.f,j.f,A.c,D.a,o.j,r.NgClass,m.a],pipes:[r.AsyncPipe],styles:["[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})();const B=p["\u0275\u0275getInheritedFactory"](Q);var $=n("BD9Z"),z=n("m8Yb"),H=n("cjL1");function W(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div",18),p["\u0275\u0275text"](1),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"](2);p["\u0275\u0275advance"](1),p["\u0275\u0275textInterpolate2"](" ","Total Users"," - ",e.totalRecords," ")}}function J(e,t){1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275text"](1,"Active"),p["\u0275\u0275elementContainerEnd"]())}function K(e,t){1&e&&(p["\u0275\u0275elementContainerStart"](0),p["\u0275\u0275text"](1,"Inactive"),p["\u0275\u0275elementContainerEnd"]())}function X(e,t){if(1&e){const e=p["\u0275\u0275getCurrentView"]();p["\u0275\u0275elementStart"](0,"ion-row",25),p["\u0275\u0275listener"]("click",(function(n){p["\u0275\u0275restoreView"](e);const r=t.$implicit;return p["\u0275\u0275nextContext"](3).viewUser(n,r)})),p["\u0275\u0275elementStart"](1,"ion-col"),p["\u0275\u0275elementStart"](2,"div"),p["\u0275\u0275elementStart"](3,"div"),p["\u0275\u0275text"](4),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"div",26),p["\u0275\u0275text"](6),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](7,"ion-col"),p["\u0275\u0275elementStart"](8,"div"),p["\u0275\u0275text"](9),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](10,"ion-col"),p["\u0275\u0275elementStart"](11,"div"),p["\u0275\u0275text"](12),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](13,"ion-col"),p["\u0275\u0275elementStart"](14,"div"),p["\u0275\u0275elementStart"](15,"ion-chip",27),p["\u0275\u0275template"](16,J,2,0,"ng-container",28),p["\u0275\u0275template"](17,K,2,0,"ng-container",28),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](18,"ion-col",21),p["\u0275\u0275elementStart"](19,"div"),p["\u0275\u0275elementStart"](20,"ion-button",29),p["\u0275\u0275listener"]("click",(function(n){p["\u0275\u0275restoreView"](e);const r=t.$implicit;return p["\u0275\u0275nextContext"](3).showUserActions(n,r)})),p["\u0275\u0275element"](21,"ion-icon",23),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate"](e.name),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate2"]("ID:",e.user_id," | ",null==e.role?null:e.role.name,""),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](e.mobile_number),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"](null==e.place?null:e.place.name),p["\u0275\u0275advance"](3),p["\u0275\u0275property"]("color",e.is_active?"success":"danger"),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",e.is_active),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",!e.is_active)}}function Y(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"ion-grid",19),p["\u0275\u0275elementStart"](1,"ion-row",20),p["\u0275\u0275elementStart"](2,"ion-col"),p["\u0275\u0275elementStart"](3,"span"),p["\u0275\u0275text"](4),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](5,"ion-col"),p["\u0275\u0275elementStart"](6,"span"),p["\u0275\u0275text"](7),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](8,"ion-col"),p["\u0275\u0275elementStart"](9,"span"),p["\u0275\u0275text"](10),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](11,"ion-col"),p["\u0275\u0275elementStart"](12,"span"),p["\u0275\u0275text"](13),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](14,"ion-col",21),p["\u0275\u0275elementStart"](15,"span"),p["\u0275\u0275elementStart"](16,"ion-button",22),p["\u0275\u0275element"](17,"ion-icon",23),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](18,X,22,8,"ion-row",24),p["\u0275\u0275elementEnd"]()),2&e){const e=p["\u0275\u0275nextContext"]().results;p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate"]("Name"),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"]("Mobile"),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"]("Location"),p["\u0275\u0275advance"](3),p["\u0275\u0275textInterpolate"]("Status"),p["\u0275\u0275advance"](5),p["\u0275\u0275property"]("ngForOf",e)}}function Z(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275template"](1,W,2,2,"div",16),p["\u0275\u0275template"](2,Y,19,5,"ion-grid",17),p["\u0275\u0275elementEnd"]()),2&e){const e=t.results,n=p["\u0275\u0275nextContext"]();p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",n.totalRecords),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("ngIf",e)}}let ee=(()=>{class e{constructor(e,t,n,r,i,a,l,s){this.popoverService=e,this.baseAPI=t,this.loadingCntrl=n,this.alertCntrl=r,this.orgService=i,this.popover=a,this.modalService=l,this.sortProvider=s,this.apiDirectory=u.c,this.changeEmployPermissions=[u.a],this.paginatedListConfig={url:u.c.users},this.sortOptions=this.intialiseSortOptions(),this.sortParam=new y.a("name","ASC",{label:"User Name",value:"name"}),this.status={value:!0,label:"Active",name:"status"},this.subscriptions=new Array,this.filter=new C,this.searchInput=new o.e}intialiseSortOptions(){const e=new Array;return e.push({label:"User Name",value:"name",meta:{}},{label:"Manager name",value:"manager__name",meta:{}},{label:"Role",value:"role__name",meta:{}},{label:"Location",value:"place__name",meta:{}}),e.sort((e,t)=>e.label.localeCompare(t.label)),e}ngOnInit(){}performSearch(){this.refresh()}clear(){this.searchInput.reset(),this.refresh()}mapUser(e){return e}handleResponse(e){this.totalRecords=e.page.count}refresh(){const e=new Map(this.filter.toQureryMap());e.set(c.d,this.sortParam.getQueryValue()),null!=this.status.value&&e.set(x.i,new Boolean(this.status.value).toString()),Object(c.l)(this.searchInput.value)&&(e.set(x.g,this.searchInput.value),e.set(x.f,"node")),this.paginatedList.setParams(e),this.paginatedList.refresh()}ngAfterViewInit(){setTimeout(()=>{this.subscriptions.push(this.orgService.organisation.subscribe(e=>{this.refresh()}))},10)}sort(e){this.sortProvider.open({params:{options:this.sortOptions,current:this.sortParam,header:"Sort By"},event:e,selectHandler:e=>{this.sortParam=e,this.refresh()}})}showStatusOptions(e){this.popover.showActions({event:e,params:{options:[{label:"All",value:null,name:"status",icon:"list-circle-outline"},{label:"Active",value:!0,name:"status",icon:"checkmark-circle-outline"},{label:"Inactive",value:!1,name:"status",icon:"close-outline"}],selectedValue:this.status},selectHandler:e=>{this.status={value:e.value,label:e.label,name:"status"},this.refresh()}})}showUserActions(e,t){e.stopPropagation();const n=[{label:"Change Password",value:"password",name:"password"},{label:"Edit",value:"edit",name:"edit",permissions:this.changeEmployPermissions},{label:"View",value:"view",name:"view"},{label:"Reset Device",value:"reset_device",name:"reset_device",permissions:[u.b]}];n.push(t.is_active?{label:"Mark Inactive",value:"inactive",name:"inactive"}:{label:"Mark Active",value:"active",name:"active"}),this.popover.showActions({event:e,params:{options:n},selectHandler:n=>{switch(n.value){case"edit":this.viewUser(e,t,x.b);break;case"view":this.viewUser(e,t,x.o);break;case"password":this.modalService.showModal({component:O,event:e,params:{user:t},selectHandler:e=>{this.refresh()}});break;case"inactive":this.changeUserStatusAlert(e,{header:"Inactive User",subheader:`Are you sure you want to mark ${t.name} inactive?`},t,!1);break;case"active":this.changeUserStatusAlert(e,{header:"Activate User",subheader:`Are you sure you want to mark ${t.name} active?`},t,!0);break;case"reset_device":this.handleResetDeviceAction(e,t)}}})}viewUser(e,t,n=x.o){this.modalService.showModal({component:Q,event:e,params:{userId:t.id,mode:n},selectHandler:e=>{this.refresh()},cssClasses:[x.e]})}showFilter(e){}changeUserStatusAlert(e,t,n,r){return Object(l.a)(this,void 0,void 0,(function*(){const o=Object(c.p)({key:"user",value:n},{key:"status",value:r}),i={cancel:()=>!0,submit:e=>{const t=e.get("user"),n=e.get("status");return this.chageUserStatus(t,n),!0}};this.showOperationAlert(e,t,o,i)}))}showOperationAlert(e,t,n,r){return Object(l.a)(this,void 0,void 0,(function*(){(yield this.alertCntrl.create({header:t.header,subHeader:t.subheader,buttons:[{text:"Cancel",handler:()=>{r&&Object(c.k)(r.cancel)&&r.cancel()}},{text:"Submit",handler:()=>{r&&Object(c.k)(r.submit)&&r.submit(n)}}]})).present()}))}chageUserStatus(e,t){return Object(l.a)(this,void 0,void 0,(function*(){const n=yield this.loadingCntrl.create({message:x.j});n.present(),this.baseAPI.executePatch({url:`${u.c.user}${e.id}/`,body:{is_active:t}}).subscribe(e=>{n.dismiss(),this.popoverService.showToast(Object(x.n)("updated"),x.h,[x.k]),this.refresh()},e=>{console.log(e),n.dismiss(),this.popoverService.showToast(Object(x.m)("updated"),x.h,[x.c])})}))}resetUserDevice(e){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.loadingCntrl.create({message:x.j});t.present(),this.baseAPI.executeDelete({url:`${u.c.userDevice}${e.id}/`}).subscribe(e=>{t.dismiss(),this.popoverService.showToast(Object(x.n)("updated"),x.h,[x.k]),this.refresh()},e=>{console.log(e),t.dismiss(),this.popoverService.showToast(Object(x.m)("updated"),x.h,[x.c])})}))}handleResetDeviceAction(e,t){const n=Map.from({key:"user",value:t}),r={cancel:()=>!0,submit:e=>(this.resetUserDevice(e.get("user")),!0)};this.showOperationAlert(e,{header:"Reset User Device",subheader:`Are you sure you want to reset ${t.name}'s device?`},n,r)}ngOnDestroy(){Object(c.u)(this.subscriptions)}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](v.a),p["\u0275\u0275directiveInject"](h.a),p["\u0275\u0275directiveInject"](i.I),p["\u0275\u0275directiveInject"](i.a),p["\u0275\u0275directiveInject"]($.a),p["\u0275\u0275directiveInject"](v.a),p["\u0275\u0275directiveInject"](z.a),p["\u0275\u0275directiveInject"](H.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-user-list"]],viewQuery:function(e,t){var n;1&e&&p["\u0275\u0275viewQuery"](w.a,!0),2&e&&p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.paginatedList=n.first)},decls:31,vars:8,consts:[[1,"ion-padding-vertical"],[1,"ion-text-left","ion-margin-bottom"],[1,"ion-no-padding"],[1,"ion-align-items-center"],["size","6"],[1,"white-bg","search-bar"],["name","search-outline",1,"mild"],["type","text","placeholder","Search with user name, mobile or id...",3,"formControl","keydown.enter"],[1,"ion-padding-horizontal"],["size","small","fill","outline",3,"click"],[1,"ion-text-right"],["size","small",3,"fill","click"],["name","funnel-outline","slot","start"],["slot","end",3,"name"],[3,"config","lgTemplate","mapFn","onContent"],["usersTemplate",""],["class","ion-padding-bottom mild small-font",4,"ngIf"],["class","ion-no-padding adjoint-data-grid mat-elevation-z2 boder-box white-bg",4,"ngIf"],[1,"ion-padding-bottom","mild","small-font"],[1,"ion-no-padding","adjoint-data-grid","mat-elevation-z2","boder-box","white-bg"],[1,"grid-header","sticky-header"],["size","auto"],["fill","clear","color","dark",2,"opacity","0","max-height","1px"],["name","ellipsis-vertical-outline","slot","icon-only"],["class","white-bg ion-align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"white-bg","ion-align-items-center",3,"click"],[1,"small-font","mild","small-margin-top"],[3,"color"],[4,"ngIf"],["fill","clear","color","dark",3,"click"]],template:function(e,t){if(1&e&&(p["\u0275\u0275elementStart"](0,"div"),p["\u0275\u0275elementStart"](1,"ion-grid"),p["\u0275\u0275elementStart"](2,"ion-row",0),p["\u0275\u0275elementStart"](3,"ion-col"),p["\u0275\u0275elementStart"](4,"div",1),p["\u0275\u0275elementStart"](5,"div"),p["\u0275\u0275elementStart"](6,"ion-grid",2),p["\u0275\u0275elementStart"](7,"ion-row",3),p["\u0275\u0275elementStart"](8,"ion-col",4),p["\u0275\u0275elementStart"](9,"div",5),p["\u0275\u0275element"](10,"ion-icon",6),p["\u0275\u0275elementStart"](11,"input",7),p["\u0275\u0275listener"]("keydown.enter",(function(){return t.performSearch()})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](12,"ion-col",8),p["\u0275\u0275elementStart"](13,"ion-button",9),p["\u0275\u0275listener"]("click",(function(){return t.performSearch()})),p["\u0275\u0275text"](14,"Search"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](15,"ion-button",9),p["\u0275\u0275listener"]("click",(function(){return t.clear()})),p["\u0275\u0275text"](16,"Clear"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](17,"ion-col"),p["\u0275\u0275elementStart"](18,"div",10),p["\u0275\u0275elementStart"](19,"ion-button",11),p["\u0275\u0275listener"]("click",(function(e){return t.showFilter(e)})),p["\u0275\u0275element"](20,"ion-icon",12),p["\u0275\u0275text"](21," Filter "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](22,"ion-button",9),p["\u0275\u0275listener"]("click",(function(e){return t.showStatusOptions(e)})),p["\u0275\u0275text"](23),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](24,"ion-button",9),p["\u0275\u0275listener"]("click",(function(e){return t.sort(e)})),p["\u0275\u0275text"](25),p["\u0275\u0275element"](26,"ion-icon",13),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](27,"rainbow-body"),p["\u0275\u0275elementStart"](28,"adjoint-paginated-list",14),p["\u0275\u0275listener"]("onContent",(function(e){return t.handleResponse(e)})),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275template"](29,Z,3,2,"ng-template",null,15,p["\u0275\u0275templateRefExtractor"])),2&e){const e=p["\u0275\u0275reference"](30);p["\u0275\u0275advance"](11),p["\u0275\u0275property"]("formControl",t.searchInput),p["\u0275\u0275advance"](8),p["\u0275\u0275property"]("fill",t.filter&&t.filter.isNotEmpty()?"solid":"outline"),p["\u0275\u0275advance"](4),p["\u0275\u0275textInterpolate1"](" ",t.status.label," "),p["\u0275\u0275advance"](2),p["\u0275\u0275textInterpolate1"](" ",t.sortParam.option.label," "),p["\u0275\u0275advance"](1),p["\u0275\u0275property"]("name","ASC"==t.sortParam.order?"arrow-down-outline":"arrow-up-outline"),p["\u0275\u0275advance"](2),p["\u0275\u0275property"]("config",t.paginatedListConfig)("lgTemplate",e)("mapFn",t.mapUser)}},directives:[i.k,i.x,i.h,i.m,o.c,o.o,o.f,i.d,M.a,w.a,r.NgIf,r.NgForOf,i.g],styles:[""]}),e})();var te=n("KiGM"),ne=n("eGxD"),re=n("CId/");const oe=[{path:"",component:(()=>{class e{constructor(e,t){this.modalService=e,this.orgService=t,this.config={title:"User Management",subtitle:"User access management for your application"}}ngOnInit(){this.orgService.myIndex=""}addUser(e){this.modalService.showModal({component:E,event:e,cssClasses:["right-aligned-full-height"],selectHandler:e=>{this.userList&&this.userList.refresh()}})}}return e.\u0275fac=function(t){return new(t||e)(p["\u0275\u0275directiveInject"](z.a),p["\u0275\u0275directiveInject"]($.a))},e.\u0275cmp=p["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-user-management"]],viewQuery:function(e,t){var n;1&e&&p["\u0275\u0275viewQuery"](ee,!0),2&e&&p["\u0275\u0275queryRefresh"](n=p["\u0275\u0275loadQuery"]())&&(t.userList=n.first)},decls:14,vars:1,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","end"],[3,"config"],["buttons",""],["fill","solid","shape","round",3,"click"],["slot","start","name","add"],[1,"ion-padding-horizontal"]],template:function(e,t){1&e&&(p["\u0275\u0275elementStart"](0,"ion-header",0),p["\u0275\u0275elementStart"](1,"ion-toolbar",1),p["\u0275\u0275elementStart"](2,"ion-title"),p["\u0275\u0275element"](3,"adj-organisation"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](4,"ion-buttons",2),p["\u0275\u0275element"](5,"adj-user-profile"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](6,"ion-content"),p["\u0275\u0275elementStart"](7,"adj-page",3),p["\u0275\u0275elementStart"](8,"div",4),p["\u0275\u0275elementStart"](9,"ion-button",5),p["\u0275\u0275listener"]("click",(function(e){return t.addUser(e)})),p["\u0275\u0275element"](10,"ion-icon",6),p["\u0275\u0275text"](11," Add User "),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementStart"](12,"div",7),p["\u0275\u0275element"](13,"adj-user-list"),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"](),p["\u0275\u0275elementEnd"]()),2&e&&(p["\u0275\u0275advance"](7),p["\u0275\u0275property"]("config",t.config))},directives:[i.l,i.F,i.D,te.a,i.e,ne.a,i.i,re.a,i.d,i.m,ee],styles:[""]}),e})()}];let ie=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.j.forChild(oe)],a.j]}),e})();var ae=n("LkjY"),le=n("NFeN"),se=n("1jcm");let me=(()=>{class e{}return e.\u0275mod=p["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=p["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[r.CommonModule,o.i,i.G,ie,ae.a,o.t,j.d,le.a,_.c,se.a,D.b]]}),e})()}}]);