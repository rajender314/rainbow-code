(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{oRfM:function(e,t,n){"use strict";n.r(t),n.d(t,"StoresPageModule",(function(){return N}));var a=n("ofXK"),r=n("3Pt+"),i=n("TEn/"),l=n("tyNb"),o=n("ERDq"),s=n("fXoL"),m=n("BD9Z"),d=n("KiGM"),c=n("eGxD"),p=n("CId/"),h=n("ecLg"),u=n("xE5a"),f=n("coUQ"),S=n("jrR7"),g=n("he5r"),v=n("BKks"),E=n("+Sl4"),x=n("N/Ph"),b=n("2Q4r");function I(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",17),s["\u0275\u0275text"](1),s["\u0275\u0275pipe"](2,"uppercase"),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"](2);s["\u0275\u0275advance"](1),s["\u0275\u0275textInterpolate2"](" ",s["\u0275\u0275pipeBind1"](2,2,"Total Records")," - ",e.totalRecords," ")}}const w=function(e){return["/rainbow/stores",e]};function y(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"ion-row",25),s["\u0275\u0275elementStart"](1,"ion-col",20),s["\u0275\u0275elementStart"](2,"div"),s["\u0275\u0275elementStart"](3,"div"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"div",26),s["\u0275\u0275text"](6),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](7,"div",26),s["\u0275\u0275text"](8),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](9,"ion-col"),s["\u0275\u0275elementStart"](10,"div"),s["\u0275\u0275elementStart"](11,"div"),s["\u0275\u0275text"](12),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](13,"div",26),s["\u0275\u0275text"](14),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"ion-col"),s["\u0275\u0275elementStart"](16,"div"),s["\u0275\u0275text"](17),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](18,"ion-col"),s["\u0275\u0275elementStart"](19,"div"),s["\u0275\u0275text"](20),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](21,"ion-col"),s["\u0275\u0275elementStart"](22,"div"),s["\u0275\u0275elementStart"](23,"div"),s["\u0275\u0275text"](24),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"ion-col"),s["\u0275\u0275elementStart"](26,"div"),s["\u0275\u0275text"](27),s["\u0275\u0275pipe"](28,"date"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](29,"ion-col",21),s["\u0275\u0275elementStart"](30,"div",1),s["\u0275\u0275elementStart"](31,"ion-button",27),s["\u0275\u0275element"](32,"ion-icon",23),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;s["\u0275\u0275property"]("routerLink",s["\u0275\u0275pureFunction1"](12,w,e.store_id)),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.store_name),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.outlet_id),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate1"]("Dhanush ID: ",e.dhanush_id,""),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"](e.branch),s["\u0275\u0275advance"](2),s["\u0275\u0275textInterpolate"](e.outlet_id),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](e.market_name),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"](e.wd_id),s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate1"](" ",e.beat_name," "),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate1"](" ",s["\u0275\u0275pipeBind1"](28,10,e.updated_on)," ")}}function C(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"ion-grid",18),s["\u0275\u0275elementStart"](1,"ion-row",19),s["\u0275\u0275elementStart"](2,"ion-col",20),s["\u0275\u0275elementStart"](3,"span"),s["\u0275\u0275text"](4),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](5,"ion-col"),s["\u0275\u0275elementStart"](6,"span"),s["\u0275\u0275text"](7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](8,"ion-col"),s["\u0275\u0275elementStart"](9,"span"),s["\u0275\u0275text"](10),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](11,"ion-col"),s["\u0275\u0275elementStart"](12,"span"),s["\u0275\u0275text"](13),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](14,"ion-col"),s["\u0275\u0275elementStart"](15,"span"),s["\u0275\u0275text"](16),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"ion-col"),s["\u0275\u0275elementStart"](18,"span"),s["\u0275\u0275text"](19),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](20,"ion-col",21),s["\u0275\u0275elementStart"](21,"span"),s["\u0275\u0275elementStart"](22,"ion-button",22),s["\u0275\u0275element"](23,"ion-icon",23),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](24,y,33,14,"ion-row",24),s["\u0275\u0275elementEnd"]()),2&e){const e=s["\u0275\u0275nextContext"]().results;s["\u0275\u0275advance"](4),s["\u0275\u0275textInterpolate"]("Store Name"),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"]("Branch"),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"]("Market Name"),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"]("WD ID"),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"]("Beat"),s["\u0275\u0275advance"](3),s["\u0275\u0275textInterpolate"]("Visited"),s["\u0275\u0275advance"](5),s["\u0275\u0275property"]("ngForOf",e)}}function M(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div",0),s["\u0275\u0275template"](1,I,3,4,"div",15),s["\u0275\u0275template"](2,C,25,7,"ion-grid",16),s["\u0275\u0275elementEnd"]()),2&e){const e=t.results,n=s["\u0275\u0275nextContext"]();s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",n.totalRecords),s["\u0275\u0275advance"](1),s["\u0275\u0275property"]("ngIf",e)}}let k=(()=>{class e extends u.a{constructor(){super(...arguments),this.filterBranchList=[],this.filterRaType=[],this.filterRaColor=[],this.filterBeatList=[],this.filterMarketList=[],this.filterMerchandiserList=[]}ngOnInit(){super.ngOnInit(),this.searchInput=new r.e,this.storeFilter=new E.a,this.dateFunction=f.a.ALL_DURATION,this.status={value:!0,label:"Active",name:"status"}}ngAfterViewInit(){this.refresh()}getListConfig(){return{url:v.c.storeDetailList}}isAutoReload(){return!1}mapData(e){return e.selected=this.selectAll,e}getParams(){let e=this.filterParameters();return this.paginatedList.setParams(e),this.paginatedList.refresh(),new Map}clear(){this.searchInput.reset(),this.refresh()}showStoreDetails(e,t){this.modalService.showModal({component:o.a,params:{mode:e,store:t,storeId:t.store_id,title:"Store Details"},cssClasses:[g.e]})}getFilterParams(e){for(let t in e)"branch"==t&&e[t].map(e=>{this.filterBranchList.push(e.branch)}),"RAType"==t&&e[t].map(e=>{this.filterRaType.push(e.name)}),"RAColor"==t&&e[t].map(e=>{this.filterRaColor.push(e.name)}),"Beat"==t&&e[t].map(e=>{this.filterBeatList.push(e.name)}),"MarketName"==t&&e[t].map(e=>{this.filterMarketList.push(e.name)}),"Merchandiser"==t&&e[t].map(e=>{this.filterMerchandiserList.push(e.name)})}showFilter(e){this.modalService.showModal({component:h.a,params:{current:this.storeFilter,showStores:!0,title:"Store Filter",type:2},selectHandler:e=>{Object.keys(e).length?this.getFilterParams(e):(this.filterBranchList=[],this.filterBeatList=[],this.filterRaColor=[],this.filterRaType=[],this.filterMarketList=[],this.filterMerchandiserList=[]),this.selectAll=!1,this.refresh()},cssClasses:[g.e]})}performSearch(){this.getParams()}filterParameters(){const e=new Map;return console.log(this.searchInput.value),Object(S.l)(this.searchInput.value)&&e.set("search_key",this.searchInput.value),e.set("activity_id","111"),e.set("branch",this.filterBranchList),e.set("ra_type",this.filterRaType),e.set("ra_color",this.filterRaColor),e.set("beat_name",this.filterBeatList),e.set("market_name",this.filterMarketList),e.set("marchendiser_name",this.filterMerchandiserList),e.set(g.d,this.dateFunction.start()),e.set(g.l,this.dateFunction.end()),e}exportVisits(e){this.uiProvider.showActions({event:e,params:{options:[{label:"CSV",value:null,name:"status"},{label:"PDF",value:!0,name:"status"},{label:"PPT",value:!1,name:"status"}],selectedValue:this.status},selectHandler:e=>{this.status={value:e.value,label:e.label,name:"status"}}})}}return e.\u0275fac=function(t){return L(t||e)},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-store-list"]],features:[s["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:6,consts:[[1,"ion-padding-horizontal"],[1,"ion-text-right"],[1,"ion-no-padding"],[1,"ion-align-items-center"],["size","8"],[1,"white-bg","search-bar"],["name","search-outline",1,"mild"],["type","text","placeholder","Search with Store Name or Dhanush ID",3,"formControl"],["size","small","fill","outline",1,"srch_clear",3,"click"],["size","small",3,"fill","click"],["name","funnel-outline","slot","start"],["size","small","fill","outline",3,"click"],["name","calendar-outline","slot","start"],[3,"config","lgTemplate","mapFn","onContent"],["storeTemplate",""],["class","ion-padding-bottom mild small-font",4,"ngIf"],["class","ion-no-padding adjoint-data-grid mat-elevation-z2 boder-box white-bg",4,"ngIf"],[1,"ion-padding-bottom","mild","small-font"],[1,"ion-no-padding","adjoint-data-grid","mat-elevation-z2","boder-box","white-bg"],[1,"grid-header","sticky-header"],["size","2"],["size","auto"],["fill","clear",1,"invisible"],["name","ellipsis-vertical-outline","slot","icon-only"],["class","white-bg ion-align-items-center",3,"routerLink",4,"ngFor","ngForOf"],[1,"white-bg","ion-align-items-center",3,"routerLink"],[1,"small-font","mild",2,"margin-top","4px"],["color","dark","fill","clear"]],template:function(e,t){if(1&e&&(s["\u0275\u0275elementStart"](0,"div"),s["\u0275\u0275elementStart"](1,"div",0),s["\u0275\u0275elementStart"](2,"ion-grid"),s["\u0275\u0275elementStart"](3,"ion-row"),s["\u0275\u0275elementStart"](4,"ion-col"),s["\u0275\u0275elementStart"](5,"div",1),s["\u0275\u0275elementStart"](6,"ion-grid",2),s["\u0275\u0275elementStart"](7,"ion-row",3),s["\u0275\u0275elementStart"](8,"ion-col",4),s["\u0275\u0275elementStart"](9,"div",5),s["\u0275\u0275element"](10,"ion-icon",6),s["\u0275\u0275element"](11,"input",7),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](12,"ion-col",0),s["\u0275\u0275elementStart"](13,"ion-button",8),s["\u0275\u0275listener"]("click",(function(){return t.performSearch()})),s["\u0275\u0275text"](14,"Search "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](15,"ion-button",8),s["\u0275\u0275listener"]("click",(function(){return t.clear()})),s["\u0275\u0275text"](16,"Clear"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](17,"ion-col"),s["\u0275\u0275elementStart"](18,"div",1),s["\u0275\u0275elementStart"](19,"ion-button",9),s["\u0275\u0275listener"]("click",(function(e){return t.showFilter(e)})),s["\u0275\u0275element"](20,"ion-icon",10),s["\u0275\u0275text"](21," filter "),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](22,"ion-button",11),s["\u0275\u0275listener"]("click",(function(e){return t.showDateOptions(e)})),s["\u0275\u0275element"](23,"ion-icon",12),s["\u0275\u0275text"](24),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](25,"rainbow-body"),s["\u0275\u0275elementStart"](26,"adjoint-paginated-list",13),s["\u0275\u0275listener"]("onContent",(function(e){return t.handleResponse(e)})),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275template"](27,M,3,2,"ng-template",null,14,s["\u0275\u0275templateRefExtractor"])),2&e){const e=s["\u0275\u0275reference"](28);s["\u0275\u0275advance"](11),s["\u0275\u0275property"]("formControl",t.searchInput),s["\u0275\u0275advance"](8),s["\u0275\u0275property"]("fill",t.storeFilter&&t.storeFilter.isNotEmpty()?"solid":"outline"),s["\u0275\u0275advance"](5),s["\u0275\u0275textInterpolate1"](" ",t.dateFunction.label," "),s["\u0275\u0275advance"](2),s["\u0275\u0275property"]("config",t.paginatedListConfig)("lgTemplate",e)("mapFn",t.mapData)}},directives:[i.k,i.x,i.h,i.m,r.c,r.o,r.f,i.d,x.a,b.a,a.NgIf,a.NgForOf,i.M,l.i],pipes:[a.UpperCasePipe,a.DatePipe],styles:[".srch_clear[_ngcontent-%COMP%]{float:left}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-size:14px!important}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-size:14px!important}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:14px!important}"]}),e})();const L=s["\u0275\u0275getInheritedFactory"](k),_=[{path:"",component:(()=>{class e{constructor(e){this.orgService=e,this.config={title:"Stores",subtitle:"Snapshot of the Stores for your Region"}}ngOnInit(){this.orgService.myIndex=""}}return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](m.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-stores"]],decls:9,vars:1,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","end"],[3,"config"]],template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"ion-header",0),s["\u0275\u0275elementStart"](1,"ion-toolbar",1),s["\u0275\u0275elementStart"](2,"ion-title"),s["\u0275\u0275element"](3,"adj-organisation"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](4,"ion-buttons",2),s["\u0275\u0275element"](5,"adj-user-profile"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementStart"](6,"ion-content"),s["\u0275\u0275elementStart"](7,"adj-page",3),s["\u0275\u0275element"](8,"adj-store-list"),s["\u0275\u0275elementEnd"](),s["\u0275\u0275elementEnd"]()),2&e&&(s["\u0275\u0275advance"](7),s["\u0275\u0275property"]("config",t.config))},directives:[i.l,i.F,i.D,d.a,i.e,c.a,i.i,p.a,k],styles:[""]}),e})()},{path:":id",component:o.a}];let F=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[l.j.forChild(_)],l.j]}),e})();var P=n("LkjY"),j=n("kmnG"),R=n("NFeN"),D=n("qFsG"),O=n("1jcm"),B=n("bSwM");let N=(()=>{class e{}return e.\u0275mod=s["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=s["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[a.CommonModule,r.i,i.G,F,P.a,r.t,j.d,R.a,D.c,O.a,B.b]]}),e})()}}]);