(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"CId/":function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var o=n("mrSG"),i=n("fXoL"),a=n("hrw+"),r=n("wd/R"),s=n("jrR7"),l=n("Iab2"),c=n("he5r"),u=n("jMvV"),d=n("TEn/");let _=(()=>{class e{constructor(e,t,n,o){this.popover=e,this.alertCntrl=t,this.loadingCntrl=n,this.baseAPI=o,this.onQueueEvent=new i.EventEmitter}ngOnInit(){}fileDownloadObserable(e){let t=new Map;return t.set("Content-Type",e.contentType),t.set("Accept",""),this.baseAPI.executeGet({url:e.url,headers:t,params:e.params,responseType:a.b.BLOB,isAbsoluleURL:e.isAbsoluteURL,skipAuthHeader:!!e.isAbsoluteURL})}handlePositiveResponse(e,t,n,o){Object(l.saveAs)(e,this.fileDownloadName(n)),this.closeLoading(t),Object(s.k)(o)&&o(!0)}closeLoading(e){e&&this.loadingCntrl.dismiss()}handleError(e,t,n){console.log(e),Object(s.k)(n)&&n(e),this.closeLoading(t)}downloadReport(e,t,n){return Object(o.a)(this,void 0,void 0,(function*(){const o=yield this.loadingCntrl.create({message:"Downloading..."});o.present(),this.fileDownloadObserable(e).subscribe(n=>this.handlePositiveResponse(n,o,e,t),e=>this.handleError(e,o,n))}))}fileDownloadName(t){return t.name.concat("_").concat(r().format(e.FORMAT)).concat(".").concat(t.type)}exportReport(e){return Object(o.a)(this,void 0,void 0,(function*(){(yield this.alertCntrl.create({header:e.name+" export confirmation",message:"Please click on the export button to continue with the download",buttons:["Cancel",{text:"Export",handler:()=>new Promise((t,n)=>{this.queueReport(e,t,n)})}]})).present()}))}queueReport(e,t,n){return Object(o.a)(this,void 0,void 0,(function*(){const o=yield this.loadingCntrl.create({message:"Queuing the export request..."});o.present(),this.baseAPI.executePost({url:e.url,body:e.body,params:e.params}).subscribe(e=>{o.dismiss(),this.popover.showToast("The report has been queued. You would be able to download the report from export",1500,[c.k]),t&&(t(e),this.onQueueEvent.emit(e))},e=>{o.dismiss(),this.popover.showToast("The report could not be queued. Please try later",1500,[c.c]),n&&n(e)})}))}startDownload(e){return Object(o.a)(this,void 0,void 0,(function*(){(yield this.alertCntrl.create({header:e.name+" download confirmation",message:"Please click on the download button to continue with the download",buttons:["Cancel",{text:"Download",handler:()=>new Promise((t,n)=>{this.downloadReport(e,t,n)})}]})).present()}))}}return e.FORMAT="YYMMDD_HH:mm:ss",e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](u.a),i["\u0275\u0275directiveInject"](d.a),i["\u0275\u0275directiveInject"](d.I),i["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-app-export"]],outputs:{onQueueEvent:"on-queue"},decls:2,vars:0,consts:[["exportAnchor",""]],template:function(e,t){1&e&&i["\u0275\u0275element"](0,"a",null,0)},styles:[""]}),e})();var p=n("ofXK");function h(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"h1",11),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.pageConfig.title)}}function m(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"p",12),i["\u0275\u0275text"](1),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](2);i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate"](e.pageConfig.subtitle)}}function f(e,t){if(1&e&&(i["\u0275\u0275elementStart"](0,"ion-row",5),i["\u0275\u0275elementStart"](1,"ion-col"),i["\u0275\u0275elementStart"](2,"div",6),i["\u0275\u0275template"](3,h,2,1,"h1",7),i["\u0275\u0275template"](4,m,2,1,"p",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"ion-col",9),i["\u0275\u0275elementStart"](6,"div",10),i["\u0275\u0275projection"](7,1),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",e.pageConfig.title),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.pageConfig.subtitle)}}const g=["*",[["","buttons",""]]],b=["*","[buttons]"];let v=(()=>{class e{constructor(){this.showExportReportStatus=!0}ngOnInit(){}get export(){return this.exportElement}handleReportExports(e){this.showExportReportStatus=!0}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-page"]],viewQuery:function(e,t){var n;1&e&&i["\u0275\u0275viewQuery"](_,!0),2&e&&i["\u0275\u0275queryRefresh"](n=i["\u0275\u0275loadQuery"]())&&(t.exportElement=n.first)},inputs:{pageConfig:["config","pageConfig"]},ngContentSelectors:b,decls:7,vars:1,consts:[[1,"ion-padding-horizontal"],[1,"ion-no-padding"],["class","ion-justify-content-center ion-align-items-center",4,"ngIf"],[1,"ion-justify-content-center"],["size","12","size-lg","12"],[1,"ion-justify-content-center","ion-align-items-center"],[1,"ion-padding"],["class","bold",4,"ngIf"],["class","light-mild",4,"ngIf"],["size","auto"],[1,"ion-padding","ion-text-right"],[1,"bold"],[1,"light-mild"]],template:function(e,t){1&e&&(i["\u0275\u0275projectionDef"](g),i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275element"](1,"adj-app-export"),i["\u0275\u0275elementStart"](2,"ion-grid",1),i["\u0275\u0275template"](3,f,8,2,"ion-row",2),i["\u0275\u0275elementStart"](4,"ion-row",3),i["\u0275\u0275elementStart"](5,"ion-col",4),i["\u0275\u0275projection"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.pageConfig))},directives:[_,d.k,p.NgIf,d.x,d.h],styles:["[_nghost-%COMP%]{overflow:visible}"]}),e})()},Iab2:function(e,t,n){var o,i;void 0===(i="function"==typeof(o=function(){"use strict";function t(e,t,n){var o=new XMLHttpRequest;o.open("GET",e),o.responseType="blob",o.onload=function(){a(o.response,t,n)},o.onerror=function(){console.error("could not download file")},o.send()}function n(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(t){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var i="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=i.saveAs||("object"!=typeof window||window!==i?function(){}:"download"in HTMLAnchorElement.prototype?function(e,a,r){var s=i.URL||i.webkitURL,l=document.createElement("a");l.download=a=a||e.name||"download",l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?o(l):n(l.href)?t(e,a,r):o(l,l.target="_blank")):(l.href=s.createObjectURL(e),setTimeout((function(){s.revokeObjectURL(l.href)}),4e4),setTimeout((function(){o(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,i,a){if(i=i||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,a),i);else if(n(e))t(e,i,a);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){o(r)}))}}:function(e,n,o,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),"string"==typeof e)return t(e,n,o);var r="application/octet-stream"===e.type,s=/constructor/i.test(i.HTMLElement)||i.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&s)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=e:location=e,a=null},c.readAsDataURL(e)}else{var u=i.URL||i.webkitURL,d=u.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout((function(){u.revokeObjectURL(d)}),4e4)}});i.saveAs=a.saveAs=a,e.exports=a})?o.apply(t,[]):o)||(e.exports=i)},KiGM:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var o=n("jrR7"),i=n("fXoL"),a=n("BD9Z"),r=n("jMvV"),s=n("tyNb"),l=n("TEn/"),c=n("ofXK");function u(e,t){1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275text"](1," \xa0 "),i["\u0275\u0275elementStart"](2,"span",9),i["\u0275\u0275text"](3,"/"),i["\u0275\u0275elementEnd"](),i["\u0275\u0275text"](4," \xa0 "),i["\u0275\u0275elementContainerEnd"]())}function d(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,u,5,0,"ng-container",5),i["\u0275\u0275text"](2),i["\u0275\u0275pipe"](3,"uppercase"),i["\u0275\u0275elementStart"](4,"span",8),i["\u0275\u0275text"](5,"\xa0 "),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"](),t=e.index,n=e.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",t>1),i["\u0275\u0275advance"](1),i["\u0275\u0275textInterpolate1"](" ",i["\u0275\u0275pipeBind1"](3,2,n.name),"")}}function _(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"span",7),i["\u0275\u0275listener"]("click",(function(n){i["\u0275\u0275restoreView"](e);const o=t.$implicit;return i["\u0275\u0275nextContext"](2).showOptions(n,o)})),i["\u0275\u0275template"](1,d,6,4,"ng-container",5),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngIf",e.parent_id)}}function p(e,t){if(1&e&&(i["\u0275\u0275elementContainerStart"](0),i["\u0275\u0275template"](1,_,2,1,"span",6),i["\u0275\u0275elementContainerEnd"]()),2&e){const e=i["\u0275\u0275nextContext"]();i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("ngForOf",e.currentOrg)}}let h=(()=>{class e{constructor(e,t,n,o,i,a){this.orgService=e,this.popover=t,this.router=n,this._cdr=o,this.uiProvider=i,this.route=a,this.status={value:!0,label:"Rainbow",name:"status"},this.subscriptions=new Array,this.statusNmae="/sunrise/dashboard"==this.router.url||"/sunrise/stores"==this.router.url?{value:!1,label:"Sunrise",name:"status"}:{value:!0,label:"Rainbow",name:"status"}}processOrgChange(e,t){const n=new Array;let o=e.root;for(;null!=o;)n.push(o),o=o.child;const i=this.getLeafNode(n[n.length-1],t);return i&&n.push(i),n}ngOnInit(){const e=this.orgService.organisation.subscribe(e=>{this.organisation=e,this.nodes&&(this.currentOrg=this.processOrgChange(e,this.nodes))}),t=this.orgService.allOrganisationNodes.subscribe(e=>{Object(o.m)(e)&&(this.nodes=e,this.currentOrg=this.processOrgChange(this.organisation,e))});this.subscriptions.push(e,t)}getLeafNode(e,t){const n=e.id,i=t.filter(e=>e.parent_id==n);return Object(o.m)(i)?{name:"ALL",id:null,parent_id:n,type:i[0].type,canChange:!0}:null}showOptions(e,t){const n=t.parent_id;if(Object(o.o)(n)||Object(o.i)(this.nodes)||!t.canChange)return;const i=this.nodes.filter(e=>e.parent_id==n).map(e=>({label:e.name,value:e,icon:"location-outline"}));i.push({label:"ALL",value:{name:"all",id:"all"},icon:"location-outline"}),this.uiProvider.showActions({event:e,params:{options:i,selectedValue:{label:t.name,value:t,icon:"location-outline"}},selectHandler:e=>{if("ALL"==e.label)this.orgService.removeOrgName(t);else{const t=e.value;t.canChange=!0,this.orgService.updateOrgNode(t)}}})}projectOptions(e){this.popover.showActions({event:e,params:{options:[{label:"Rainbow",value:!0,name:"status"},{label:"Sunrise",value:!1,name:"status"}],selectedValue:this.statusNmae?this.statusNmae:this.status},selectHandler:e=>{this.status={value:e.value,label:e.label,name:"status"},this.orgService.setProjName(this.status.value),this.goToPath(this.status.value)}})}goToPath(e){1==e?this.router.navigate(["rainbow/dashboard"]):0==e&&this.router.navigate(["/sunrise/dashboard"])}ngOnDestroy(){Object(o.u)(this.subscriptions)}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](a.a),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](s.h),i["\u0275\u0275directiveInject"](i.ChangeDetectorRef),i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-organisation"]],decls:7,vars:2,consts:[[1,"switch-app"],["buttons",""],["fill","solid","shape","round",3,"click"],["name","caret-down-outline"],[1,"all-state"],[4,"ngIf"],["class","small-font clickable",3,"click",4,"ngFor","ngForOf"],[1,"small-font","clickable",3,"click"],[1,"light","mild","extra-small-font"],[1,"extra-mild"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"div",0),i["\u0275\u0275elementStart"](1,"div",1),i["\u0275\u0275elementStart"](2,"ion-button",2),i["\u0275\u0275listener"]("click",(function(e){return t.projectOptions(e)})),i["\u0275\u0275text"](3),i["\u0275\u0275element"](4,"ion-icon",3),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"div",4),i["\u0275\u0275template"](6,p,2,1,"ng-container",5),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](3),i["\u0275\u0275textInterpolate1"](" ",t.statusNmae?t.statusNmae.label:t.status.label," "),i["\u0275\u0275advance"](3),i["\u0275\u0275property"]("ngIf",t.currentOrg))},directives:[l.d,l.m,c.NgIf,c.NgForOf],pipes:[c.UpperCasePipe],styles:[".switch-app[_ngcontent-%COMP%]{display:flex}.set-app[_ngcontent-%COMP%]{padding-right:15px}.all-state[_ngcontent-%COMP%]{padding:10px}.icn-alin[_ngcontent-%COMP%]{margin-bottom:4px}"]}),e})()},eGxD:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n("fXoL"),i=n("qIOU"),a=n("jMvV"),r=n("ofXK"),s=n("TEn/");function l(e,t){if(1&e){const e=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"ion-button",1),o["\u0275\u0275listener"]("click",(function(t){return o["\u0275\u0275restoreView"](e),o["\u0275\u0275nextContext"]().showOptions(t)})),o["\u0275\u0275element"](1,"ion-icon",2),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"]()}if(2&e){const e=o["\u0275\u0275nextContext"]();o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate1"](" ",e.user.user_name,"\n")}}let c=(()=>{class e{constructor(e,t){this.authService=e,this.uiProvider=t}ngOnInit(){this.authService.currentUser.subscribe(e=>this.user=e)}showOptions(e){const t={label:"Logout",icon:"log-out-outline",value:"logout"};this.uiProvider.showActions({event:e,params:{options:[t]},selectHandler:e=>{e.label==t.label&&this.authService.logout().subscribe()}})}}return e.\u0275fac=function(t){return new(t||e)(o["\u0275\u0275directiveInject"](i.a),o["\u0275\u0275directiveInject"](a.a))},e.\u0275cmp=o["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-user-profile"]],decls:1,vars:1,consts:[["color","primary","fill","clear",3,"click",4,"ngIf"],["color","primary","fill","clear",3,"click"],["name","person-circle-outline","slot","start"]],template:function(e,t){1&e&&o["\u0275\u0275template"](0,l,3,1,"ion-button",0),2&e&&o["\u0275\u0275property"]("ngIf",t.user)},directives:[r.NgIf,s.d,s.m],styles:[""]}),e})()},he5r:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"l",(function(){return i})),n.d(t,"o",(function(){return a})),n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"i",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"f",(function(){return d})),n.d(t,"h",(function(){return _})),n.d(t,"j",(function(){return p})),n.d(t,"k",(function(){return h})),n.d(t,"c",(function(){return m})),n.d(t,"s",(function(){return f})),n.d(t,"q",(function(){return g})),n.d(t,"p",(function(){return b})),n.d(t,"v",(function(){return v})),n.d(t,"r",(function(){return w})),n.d(t,"u",(function(){return k})),n.d(t,"t",(function(){return y})),n.d(t,"n",(function(){return x})),n.d(t,"m",(function(){return O}));const o="from_date",i="to_date",a="view",r="edit",s="right-aligned-full-height",l="center-aligned-full-height",c="status",u="search",d="scope",_=1500,p="Submitting...",h="success-toast",m="error-toast",f=["is_ed_alignment_correct","does_ed_have_any_obstruction","is_ed_light_working","is_backwall_fabric_light_working","is_backwall_fabric_clean_and_not_damaged","is_there_any_obsruction_in_backwall_visibility","is_planogram_as_per_guideline","cbo_available","pack_available","no_competition_presence_in_backwall","is_counter_vinyl_clean_and_not_damaged","is_kde_counter_damaged","does_counter_have_any_stickers_etc_including_brand_board","is_pillar_clean_and_not_damaged","is_kde_on_pillar_damaged","does_pillars_have_any_stickers","backwall_door_cleaning_status","backwall_light_repair_request"],g=["is_ed_present_in_the_store","are_pillars_present_in_the_store","is_false_ceiling_present_in_the_store"],b=["ed_-_lit/elt_cleaning_done","ed_-_lit/elt_element_condition","ed_-_lit/elt_repair_request,backwall_type","backwall_light_cleaning_status","backwall_light_element_condition","backwall_light_repair_request","backwall_fabric_cleaning_status","backwall_fabric_element_condition","backwall_fabric_repair_request","backwall_door_cleaning_status","backwall_door_element_condition","backwall_door_repair_request","backwall_shelf_cleaning_status","backwall_shelf_element_condition","backwall_shelf_repair_request","counter_vinyl_cleaning_status","counter_vinyl_element_condition","counter_vinyl_repair_request","counter_brandboard_cleaning_status","counter_brandboard_element_condition","counter_brandboard_repair_request","counter_kde_cleaning_status","counter_kde_element_condition","counter_kde_repair_request"],v=["classic_rich_and_smooth_stock","classic_connect_stock","classic_balanced_taste_stock","classic_ice_burst_stock","classic_double_burst_stock","classic_rich_taste_stock","classic_refined_taste_stock","gfk_red_stock","gfk_blue_stock","gf_smart_stock","gf_indie_mint_stock","gf_premium_filter_blue_stock","marlboro_advance_gold_stock","marlboro_lights_stock","marlboro_clove_stock","marlboro_fuse_beyond_stock","marlboro_fine_touch_stock","marlboro_advanced_compact_stock"],w=["fabric_kde_units","cbo_kde_units","classic_pillar_kde_units","counter_brandboard_kde_units"],k=["pre_backwall_photo_name","pre_counter_photo_name","pre_ed_photo_name","pre_false_ceiling_photo_name","pre_outlet_close_photo_name","pre_side_1_left_side_pillar_photo_name","pre_side_1_right_side_pillar_photo_name","pre_side_2_left_side_pillar_photo_name","pre_side_2_right_side_pillar_photo_name","pre_side_3_left_side_pillar_photo_name"],y=["post_backwall_photo_name","post_counter_photo_name","post_ed_photo_name","post_false_ceiling_photo_name","post_outlet_close_photo_name","post_outlet_long_photo_name","post_plano_photo_name","post_side_1_left_side_pillar_photo_name","post_side_1_right_side_pillar_photo_name","post_side_2_left_side_pillar_photo_name","post_side_2_right_side_pillar_photo_name","post_side_3_left_side_pillar_photo_name"];function x(e){return`The user has been ${e} successfully.`}function O(e){return`The user could not be ${e}. Please try later.`}}}]);