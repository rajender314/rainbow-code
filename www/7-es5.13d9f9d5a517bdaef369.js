!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=o(e);if(t){var a=o(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+Sl4":function(t,a,l){"use strict";l.d(a,"a",(function(){return m}));var o=l("pmdr"),s=l("jrR7"),m=function(t){r(l,t);var a=i(l);function l(){return e(this,l),a.apply(this,arguments)}return n(l,[{key:"toQureryMap",value:function(){var e=new Map;return e.set("store_type",this.nullOrPrimaryKeys(this.storeType,(function(e){return e.id}))),e.set("beat_type",this.nullOrPrimaryKeys(this.beatType,(function(e){return e.id}))),e.set("beat_name",this.nullOrPrimaryKeys(this.beatName,(function(e){return e.id}))),e.set("distributor",this.nullOrPrimaryKeys(this.distributor,(function(e){return e.id}))),e.set("day",this.nullOrPrimaryKeys(this.day,(function(e){return e.id}))),e.set("week",this.nullOrPrimaryKeys(this.week,(function(e){return e.id}))),e.set("outlet",this.nullOrPrimaryKeys(this.stores,(function(e){return e.outlet_id}))),e.set("node",this.nullOrPrimaryKeys(this.node,(function(e){return e.id}))),this.onlyDistributorPresent&&e.set("distributor_absent","False"),e}},{key:"toNameMap",value:function(){var e=new Map;return e.set("store_type",this.nullOrNameValue(this.storeType,(function(e){return e.name}))),e.set("beat_type",this.nullOrNameValue(this.beatType)),e.set("beat_name",this.nullOrNameValue(this.beatName)),e.set("distributor",this.nullOrNameValue(this.distributor,(function(e){return e.name}))),e.set("day",this.nullOrNameValue(this.day)),e.set("week",this.nullOrNameValue(this.week)),e.set("outlet",this.nullOrNameValue(this.stores)),e.set("node",this.nullOrNameValue(this.node,(function(e){return e.name}))),this.onlyDistributorPresent&&e.set("distributor_absent","False"),e}},{key:"copy",value:function(){return Object.assign(new l,this)}},{key:"toIdentifibleIterator",value:function(){var e=new Array;return Object(s.m)(this.storeType)&&e.push({name:"Store Type",values:this.storeType.map((function(e){return{id:e.id+"",name:e.name}}))}),Object(s.m)(this.beatType)&&e.push({name:"Beat Type",values:this.beatType}),Object(s.m)(this.beatName)&&e.push({name:"Beat Name",values:this.beatName}),Object(s.m)(this.distributor)&&e.push({name:"Distributors",values:this.distributor.map((function(e){return{id:e.id+"",name:e.name}}))}),Object(s.m)(this.day)&&e.push({name:"Day of delivery",values:this.day.map((function(e){return{id:e.id+"",name:e.name}}))}),Object(s.m)(this.stores)&&e.push({name:"Stores",values:this.stores.map((function(e){return{id:e.outlet_id+"",name:e.name}}))}),Object(s.m)(this.node)&&e.push({name:"Geography",values:this.node.map((function(e){return{id:e.id+"",name:e.name}}))}),this.onlyDistributorPresent&&e.push({name:"Distributor Present",values:[{id:"True",name:"True"}]}),e}}]),l}(o.a)},"4jyP":function(t,r,a){"use strict";a.d(r,"a",(function(){return u}));var i=a("BKks"),l=a("S3p7"),o=a("fXoL"),s=a("hrw+"),m=a("TEn/"),d=a("ofXK");function c(e,t){if(1&e){var n=o["\u0275\u0275getCurrentView"]();o["\u0275\u0275elementStart"](0,"div",15),o["\u0275\u0275elementStart"](1,"div",9),o["\u0275\u0275text"](2),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](3,"img",16),o["\u0275\u0275listener"]("click",(function(){o["\u0275\u0275restoreView"](n);var e=t.$implicit;return o["\u0275\u0275nextContext"]().showSelectedImage(e.image_src,e.image_name)})),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;o["\u0275\u0275advance"](2),o["\u0275\u0275textInterpolate"](r.image_name),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("src",r.image_src,o["\u0275\u0275sanitizeUrl"])}}var u=function(){var t=function(){function t(n,r){e(this,t),this.inputData=n,this.baseAPI=r}return n(t,[{key:"ngOnInit",value:function(){var e=this;this.title=this.inputData.data.parameters.title,this.selectedImgUrl="https://firebasestorage.googleapis.com/v0/b/project-sunshine-7c5a0.appspot.com/o/imagesV2%2FVEC50611593865143824%2FVEC0001580891298-side1_counter_front_photo.jpeg?alt=media&token=b17ff4d9-5ad0-4166-8e3d-abb57bf6bc02",this.selectedImageName="Counter",this.baseAPI.executeGet({url:i.c.visitPreImages}).subscribe((function(t){e.imageURLs=t}),(function(t){return e.body.error=t}))}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"closed";this.inputData.data.onClose(e,t)}},{key:"showSelectedImage",value:function(e,t){this.selectedImgUrl=e,this.selectedImageName=t}}]),t}();return t.\u0275fac=function(e){return new(e||t)(o["\u0275\u0275directiveInject"](l.a),o["\u0275\u0275directiveInject"](s.a))},t.\u0275cmp=o["\u0275\u0275defineComponent"]({type:t,selectors:[["adj-image-gallery"]],decls:25,vars:4,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","end"],[3,"click"],["name","close","slot","icon-only"],[1,"main-image-section"],["size","auto"],["fill","clear",2,"margin-top","180px"],["name","arrow-back-outline","slot","icon-only"],[2,"text-align","center","font-weight","bold"],["height","400px","width","750px",3,"src"],["name","arrow-forward-outline","slot","icon-only"],[1,"footer-section"],[2,"white-space","nowrap","overflow-x","scroll"],["style","display: inline-block;",4,"ngFor","ngForOf"],[2,"display","inline-block"],["width","160px","height","150px",2,"padding","12px",3,"src","click"]],template:function(e,t){1&e&&(o["\u0275\u0275elementStart"](0,"ion-header",0),o["\u0275\u0275elementStart"](1,"ion-toolbar",1),o["\u0275\u0275elementStart"](2,"ion-buttons",2),o["\u0275\u0275elementStart"](3,"ion-button",3),o["\u0275\u0275listener"]("click",(function(){return t.close()})),o["\u0275\u0275element"](4,"ion-icon",4),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](5,"ion-title"),o["\u0275\u0275text"](6),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](7,"ion-content"),o["\u0275\u0275elementStart"](8,"div",5),o["\u0275\u0275elementStart"](9,"ion-grid"),o["\u0275\u0275elementStart"](10,"ion-row"),o["\u0275\u0275elementStart"](11,"ion-col",6),o["\u0275\u0275elementStart"](12,"ion-button",7),o["\u0275\u0275element"](13,"ion-icon",8),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](14,"ion-col"),o["\u0275\u0275elementStart"](15,"div"),o["\u0275\u0275elementStart"](16,"div",9),o["\u0275\u0275text"](17),o["\u0275\u0275elementEnd"](),o["\u0275\u0275element"](18,"img",10),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](19,"ion-col",6),o["\u0275\u0275elementStart"](20,"ion-button",7),o["\u0275\u0275element"](21,"ion-icon",11),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementStart"](22,"div",12),o["\u0275\u0275elementStart"](23,"div",13),o["\u0275\u0275template"](24,c,4,2,"div",14),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"](),o["\u0275\u0275elementEnd"]()),2&e&&(o["\u0275\u0275advance"](6),o["\u0275\u0275textInterpolate"](t.title),o["\u0275\u0275advance"](11),o["\u0275\u0275textInterpolate"](t.selectedImageName),o["\u0275\u0275advance"](1),o["\u0275\u0275property"]("src",t.selectedImgUrl,o["\u0275\u0275sanitizeUrl"]),o["\u0275\u0275advance"](6),o["\u0275\u0275property"]("ngForOf",t.imageURLs.results))},directives:[m.l,m.F,m.e,m.d,m.m,m.D,m.i,m.k,m.x,m.h,d.NgForOf],styles:[""]}),t}()},EEI8:function(t,a,l){"use strict";l.d(a,"a",(function(){return m}));var o=l("pmdr"),s=l("jrR7"),m=function(t){r(l,t);var a=i(l);function l(){return e(this,l),a.apply(this,arguments)}return n(l,[{key:"toQureryMap",value:function(){var e=new Map;return e.set("branch",this.nullOrPrimaryKeys(this.branch,(function(e){return e.branch_id}))),e.set("market_name",this.nullOrPrimaryKeys(this.MarketName,(function(e){return e.id}))),e.set("ratype",this.nullOrPrimaryKeys(this.RAType,(function(e){return e.id}))),e.set("racolor",this.nullOrPrimaryKeys(this.RAColor,(function(e){return e.id}))),e.set("beat",this.nullOrPrimaryKeys(this.Beat,(function(e){return e.id}))),e.set("merchantiser",this.nullOrPrimaryKeys(this.Merchandiser,(function(e){return e.id}))),e}},{key:"toNameMap",value:function(){var e=new Map;return e.set("branch",this.nullOrPrimaryKeys(this.branch,(function(e){return e.branch_id}))),e.set("market_name",this.nullOrPrimaryKeys(this.MarketName,(function(e){return e.id}))),e.set("ratype",this.nullOrPrimaryKeys(this.RAType,(function(e){return e.id}))),e.set("racolor",this.nullOrPrimaryKeys(this.RAColor,(function(e){return e.id}))),e.set("beat",this.nullOrPrimaryKeys(this.Beat,(function(e){return e.id}))),e.set("merchantiser",this.nullOrPrimaryKeys(this.Merchandiser,(function(e){return e.id}))),e}},{key:"copy",value:function(){return Object.assign(new l,this)}},{key:"toIdentifibleIterator",value:function(){var e=new Array;return Object(s.m)(this.branch)&&e.push({name:"Branch",values:this.branch.map((function(e){return{id:e.branch_id+"",name:e.branch}}))}),Object(s.m)(this.MarketName)&&e.push({name:"Beat Type",values:this.MarketName}),Object(s.m)(this.RAType)&&e.push({name:"Beat Name",values:this.RAType}),Object(s.m)(this.RAColor)&&e.push({name:"Distributors",values:this.RAColor.map((function(e){return{id:e.id+"",name:e.name}}))}),Object(s.m)(this.Beat)&&e.push({name:"Day of delivery",values:this.Beat.map((function(e){return{id:e.id+"",name:e.name}}))}),Object(s.m)(this.Merchandiser)&&e.push({name:"Stores",values:this.Merchandiser.map((function(e){return{id:e.id+"",name:e.name}}))}),e}}]),l}(o.a)},ERDq:function(t,r,a){"use strict";a.d(r,"a",(function(){return j}));var i=a("3Pt+"),l=a("4jyP"),o=a("S3p7"),s=a("jrR7"),m=a("PWCD"),d=a("he5r"),c=a("BKks"),u=a("fXoL"),p=a("hrw+"),h=a("m8Yb"),f=a("BD9Z"),v=a("tyNb"),y=a("TEn/"),b=a("kmnG"),S=a("qFsG"),E=a("ofXK"),g=["class","component"];function w(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ion-row",26),u["\u0275\u0275elementStart"](1,"ion-col"),u["\u0275\u0275elementStart"](2,"div"),u["\u0275\u0275elementStart"](3,"div"),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"ion-col"),u["\u0275\u0275elementStart"](6,"div"),u["\u0275\u0275elementStart"](7,"div"),u["\u0275\u0275text"](8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.element_name),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](n.presence)}}function x(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ion-col",18),u["\u0275\u0275elementStart"](1,"div",19),u["\u0275\u0275text"](2,"Element Details"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"ion-grid",20),u["\u0275\u0275elementStart"](4,"ion-row",21),u["\u0275\u0275elementStart"](5,"ion-col"),u["\u0275\u0275elementStart"](6,"span"),u["\u0275\u0275text"](7),u["\u0275\u0275pipe"](8,"uppercase"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"ion-col"),u["\u0275\u0275elementStart"](10,"span"),u["\u0275\u0275text"](11),u["\u0275\u0275pipe"](12,"uppercase"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](13,w,9,2,"ion-row",25),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=u["\u0275\u0275nextContext"]();u["\u0275\u0275advance"](7),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](8,3,"Name")),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](12,5,"Presence")),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",n.elements)}}var k=function(e){return["/rainbow/visits",e]};function I(e,t){if(1&e){var n=u["\u0275\u0275getCurrentView"]();u["\u0275\u0275elementStart"](0,"ion-row",27),u["\u0275\u0275listener"]("click",(function(){u["\u0275\u0275restoreView"](n);var e=t.$implicit;return u["\u0275\u0275nextContext"]().myRoute(e)})),u["\u0275\u0275elementStart"](1,"ion-col"),u["\u0275\u0275elementStart"](2,"div"),u["\u0275\u0275elementStart"](3,"div"),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"ion-col"),u["\u0275\u0275elementStart"](6,"div"),u["\u0275\u0275elementStart"](7,"div"),u["\u0275\u0275text"](8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](9,"ion-col"),u["\u0275\u0275elementStart"](10,"div"),u["\u0275\u0275elementStart"](11,"div"),u["\u0275\u0275text"](12),u["\u0275\u0275pipe"](13,"date"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()}if(2&e){var r=t.$implicit;u["\u0275\u0275property"]("routerLink",u["\u0275\u0275pureFunction1"](6,k,r.visit_id)),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](r.visit_id),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](r.visited_user_name),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](13,4,r.visit_date))}}function O(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"ion-row"),u["\u0275\u0275elementStart"](1,"ion-col"),u["\u0275\u0275elementStart"](2,"div",28),u["\u0275\u0275elementStart"](3,"ion-button",29),u["\u0275\u0275text"](4,"Submit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]())}function _(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"div"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",30),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=t.option;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.name),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.type)}}var j=function(){var t=function(){function t(n,r,a,i,l,o,s){var m=this;e(this,t),this.inputData=n,this.formBuilder=r,this.baseAPI=a,this.modalService=i,this.orgService=l,this.route=o,this.router=s,this.title="Store Details",this.allowDataPass=!1,this.subscription=this.route.url.subscribe((function(e){m.storeId=e[0]?e[0].path:""}))}return n(t,[{key:"ngOnInit",value:function(){this.formGroup=this.initialisedForm(""),this.visitIdData(this.storeId),this.readOnly="VIEW"==this.mode}},{key:"myRoute",value:function(e){this.router.navigate(["/rainbow/visits",e.visit_id])&&(this.orgService.myIndex=456)}},{key:"myRoute1",value:function(e){this.router.navigate(["/rainbow/visits"])&&(this.orgService.myIndex=456)}},{key:"visitIdData",value:function(e){var t=this;this.subscription=this.baseAPI.executeGet({url:c.c.storeDetailList,params:Object(s.p)({key:"store_id",value:e},{key:"page_size",value:40})}).subscribe((function(e){t.storeData=e.results,t.visits=e.results.visit_details,t.elements=e.results.element_details,console.log(t.storeData),t.storeData&&(t.formGroup=t.initialisedForm(t.storeData)),setTimeout((function(){t.allowDataPass=!0}),500)}),(function(e){return t.body.error=e}))}},{key:"showElementImages",value:function(e,t){this.modalService.showModal({component:l.a,params:{mode:e,element:t,title:"Element Image"},cssClasses:[d.a]})}},{key:"initialisedForm",value:function(e){return this.formBuilder.group({dhanush_id:[e.dhanush_id,i.u.required],name:[e.store_name?e.store_name.trim():null,i.u.required],branch:[e.branch],market_name:[e.market_name],owner_name:[e.owner_name],contact_no:[e.owner_mobile,i.u.required],alternate_no:[e.alternate_no],store_status:[{value:e.store_status,disabled:this.readOnly},i.u.required],beat_name:[e.beat_name],wd_id:[e.wd_id],created_at:[e.updated_on],outlet_type:[e.outlet_type,i.u.required]})}},{key:"close",value:function(){this.router.navigate(["/rainbow/stores"])}},{key:"showVisitDetails",value:function(e,t,n){this.modalService.showModal({component:m.a,params:{mode:e,visit:t,store:n,title:"Visit Details"},cssClasses:[d.e]})}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](o.a),u["\u0275\u0275directiveInject"](i.d),u["\u0275\u0275directiveInject"](p.a),u["\u0275\u0275directiveInject"](h.a),u["\u0275\u0275directiveInject"](f.a),u["\u0275\u0275directiveInject"](v.a),u["\u0275\u0275directiveInject"](v.h))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["adj-store-details",8,"component"]],attrs:g,decls:95,vars:23,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","start"],[3,"click"],["name","arrow-back-outline","slot","icon-only"],[1,"ion-padding","white-bg",2,"min-height","100%"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","dhanush_id",3,"readonly"],["matInput","","formControlName","name",3,"readonly"],["matInput","","formControlName","branch",3,"readonly"],["matInput","","formControlName","market_name",3,"readonly"],["matInput","","formControlName","owner_name",3,"readonly"],["matInput","","formControlName","contact_no",3,"readonly"],["matInput","","formControlName","wd_id",3,"readonly"],["matInput","","formControlName","beat_name",3,"readonly"],["matInput","","formControlName","created_at",3,"readonly"],["class","ion-margin-bottom",4,"ngIf"],[1,"ion-margin-bottom"],[1,"mild","ion-margin-bottom"],[1,"ion-no-padding","adjoint-data-grid","mat-elevation-z2","boder-box","white-bg"],[1,"grid-header","sticky-header"],["class","white-bg ion-align-items-center",3,"routerLink","click",4,"ngFor","ngForOf"],[4,"ngIf"],["beatItem",""],["class","white-bg ion-align-items-center",4,"ngFor","ngForOf"],[1,"white-bg","ion-align-items-center"],[1,"white-bg","ion-align-items-center",3,"routerLink","click"],[1,"ion-padding-vertical","ion-margin-vertical"],["size","block"],[1,"small-font","mild",2,"padding-top","4px"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"ion-header",0),u["\u0275\u0275elementStart"](1,"ion-toolbar",1),u["\u0275\u0275elementStart"](2,"ion-buttons",2),u["\u0275\u0275elementStart"](3,"ion-button",3),u["\u0275\u0275listener"]("click",(function(){return t.close()})),u["\u0275\u0275element"](4,"ion-icon",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"ion-title"),u["\u0275\u0275text"](6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"ion-content"),u["\u0275\u0275elementStart"](8,"div",5),u["\u0275\u0275elementStart"](9,"form",6),u["\u0275\u0275elementStart"](10,"ion-grid"),u["\u0275\u0275elementStart"](11,"ion-row"),u["\u0275\u0275elementStart"](12,"ion-col"),u["\u0275\u0275elementStart"](13,"mat-form-field",7),u["\u0275\u0275elementStart"](14,"mat-label"),u["\u0275\u0275text"](15,"Dhanush ID"),u["\u0275\u0275elementStart"](16,"sup"),u["\u0275\u0275text"](17,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](18,"input",8),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](19,"ion-col"),u["\u0275\u0275elementStart"](20,"mat-form-field",7),u["\u0275\u0275elementStart"](21,"mat-label"),u["\u0275\u0275text"](22,"Store Name"),u["\u0275\u0275elementStart"](23,"sup"),u["\u0275\u0275text"](24,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](25,"input",9),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"ion-col"),u["\u0275\u0275elementStart"](27,"mat-form-field",7),u["\u0275\u0275elementStart"](28,"mat-label"),u["\u0275\u0275text"](29,"Branch"),u["\u0275\u0275elementStart"](30,"sup"),u["\u0275\u0275text"](31,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](32,"input",10),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](33,"ion-row"),u["\u0275\u0275elementStart"](34,"ion-col"),u["\u0275\u0275elementStart"](35,"mat-form-field",7),u["\u0275\u0275elementStart"](36,"mat-label"),u["\u0275\u0275text"](37,"Market Name"),u["\u0275\u0275elementStart"](38,"sup"),u["\u0275\u0275text"](39,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](40,"input",11),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](41,"ion-col"),u["\u0275\u0275elementStart"](42,"mat-form-field",7),u["\u0275\u0275elementStart"](43,"mat-label"),u["\u0275\u0275text"](44,"Owner Name"),u["\u0275\u0275elementStart"](45,"sup"),u["\u0275\u0275text"](46,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](47,"input",12),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](48,"ion-col"),u["\u0275\u0275elementStart"](49,"mat-form-field",7),u["\u0275\u0275elementStart"](50,"mat-label"),u["\u0275\u0275text"](51,"Owner Mobile Number"),u["\u0275\u0275elementStart"](52,"sup"),u["\u0275\u0275text"](53,"*"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](54,"input",13),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](55,"ion-row"),u["\u0275\u0275elementStart"](56,"ion-col"),u["\u0275\u0275elementStart"](57,"mat-form-field",7),u["\u0275\u0275elementStart"](58,"mat-label"),u["\u0275\u0275text"](59,"WD ID"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](60,"input",14),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](61,"ion-col"),u["\u0275\u0275elementStart"](62,"mat-form-field",7),u["\u0275\u0275elementStart"](63,"mat-label"),u["\u0275\u0275text"](64,"Beat Name"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](65,"input",15),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](66,"ion-col"),u["\u0275\u0275elementStart"](67,"mat-form-field",7),u["\u0275\u0275elementStart"](68,"mat-label"),u["\u0275\u0275text"](69,"Last Visited"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275element"](70,"input",16),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](71,"ion-row"),u["\u0275\u0275template"](72,x,14,7,"ion-col",17),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](73,"ion-row"),u["\u0275\u0275elementStart"](74,"ion-col",18),u["\u0275\u0275elementStart"](75,"div",19),u["\u0275\u0275text"](76,"Visits"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](77,"ion-grid",20),u["\u0275\u0275elementStart"](78,"ion-row",21),u["\u0275\u0275elementStart"](79,"ion-col"),u["\u0275\u0275elementStart"](80,"span"),u["\u0275\u0275text"](81),u["\u0275\u0275pipe"](82,"uppercase"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](83,"ion-col"),u["\u0275\u0275elementStart"](84,"span"),u["\u0275\u0275text"](85),u["\u0275\u0275pipe"](86,"uppercase"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](87,"ion-col"),u["\u0275\u0275elementStart"](88,"span"),u["\u0275\u0275text"](89),u["\u0275\u0275pipe"](90,"uppercase"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](91,I,14,8,"ion-row",22),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](92,O,5,0,"ion-row",23),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](93,_,5,2,"ng-template",null,24,u["\u0275\u0275templateRefExtractor"])),2&e&&(u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](t.title),u["\u0275\u0275advance"](3),u["\u0275\u0275property"]("formGroup",t.formGroup),u["\u0275\u0275advance"](9),u["\u0275\u0275property"]("readonly",!0),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("readonly",t.readOnly),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("readonly",t.readOnly),u["\u0275\u0275advance"](8),u["\u0275\u0275property"]("readonly",t.readOnly),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("readonly",t.readOnly),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("readonly",t.readOnly),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("readonly",t.readOnly),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("readonly",t.readOnly),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("readonly",t.readOnly),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngIf","VIEW"==t.mode),u["\u0275\u0275advance"](9),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](82,17,"Visit ID")),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](86,19,"Name")),u["\u0275\u0275advance"](4),u["\u0275\u0275textInterpolate"](u["\u0275\u0275pipeBind1"](90,21,"Visited On")),u["\u0275\u0275advance"](2),u["\u0275\u0275property"]("ngForOf",t.visits),u["\u0275\u0275advance"](1),u["\u0275\u0275property"]("ngIf","EDIT"==t.mode))},directives:[y.l,y.F,y.e,y.d,y.m,y.D,y.i,i.v,i.p,i.h,y.k,y.x,y.h,b.b,b.e,S.b,i.c,i.o,i.g,E.NgIf,E.NgForOf,y.M,v.i],pipes:[E.UpperCasePipe,E.DatePipe],styles:["[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t}()},PWCD:function(t,r,a){"use strict";a.d(r,"a",(function(){return x}));var i=a("mrSG"),l=a("3Pt+"),o=a("lJxs"),s=a("S3p7"),m=a("BKks"),d=a("he5r"),c=a("fXoL"),u=a("hrw+"),p=a("m3o8"),h=a("TEn/"),f=a("ofXK"),v=a("kmnG"),y=a("qFsG"),b=["nav"];function S(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"ion-row",24),c["\u0275\u0275elementStart"](1,"ion-col"),c["\u0275\u0275elementStart"](2,"div"),c["\u0275\u0275elementStart"](3,"div"),c["\u0275\u0275text"](4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"ion-col"),c["\u0275\u0275elementStart"](6,"div"),c["\u0275\u0275elementStart"](7,"div"),c["\u0275\u0275text"](8),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](n.key),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](n.value)}}function E(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"ion-col",19),c["\u0275\u0275elementStart"](1,"div",20),c["\u0275\u0275text"](2,"Outlet Health Score"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](3,"ion-grid",21),c["\u0275\u0275elementStart"](4,"ion-row",22),c["\u0275\u0275elementStart"](5,"ion-col"),c["\u0275\u0275elementStart"](6,"span"),c["\u0275\u0275text"](7),c["\u0275\u0275pipe"](8,"uppercase"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](9,"ion-col"),c["\u0275\u0275elementStart"](10,"span"),c["\u0275\u0275text"](11),c["\u0275\u0275pipe"](12,"uppercase"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](13,S,9,2,"ion-row",23),c["\u0275\u0275pipe"](14,"keyvalue"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"](2);c["\u0275\u0275advance"](7),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](8,3,"Element")),c["\u0275\u0275advance"](4),c["\u0275\u0275textInterpolate"](c["\u0275\u0275pipeBind1"](12,5,"Value")),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngForOf",c["\u0275\u0275pipeBind1"](14,7,n.visitResponse[0].outletHealthScore))}}function g(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"ion-row"),c["\u0275\u0275elementStart"](1,"ion-col"),c["\u0275\u0275elementStart"](2,"div",25),c["\u0275\u0275elementStart"](3,"ion-button",26),c["\u0275\u0275text"](4,"Submit"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]())}function w(e,t){if(1&e&&(c["\u0275\u0275elementStart"](0,"div",7),c["\u0275\u0275elementStart"](1,"form",8),c["\u0275\u0275elementStart"](2,"ion-grid"),c["\u0275\u0275elementStart"](3,"ion-row"),c["\u0275\u0275elementStart"](4,"ion-col"),c["\u0275\u0275elementStart"](5,"mat-form-field",9),c["\u0275\u0275elementStart"](6,"mat-label"),c["\u0275\u0275text"](7,"Visit ID"),c["\u0275\u0275elementStart"](8,"sup"),c["\u0275\u0275text"](9,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](10,"input",10),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](11,"ion-col"),c["\u0275\u0275elementStart"](12,"mat-form-field",9),c["\u0275\u0275elementStart"](13,"mat-label"),c["\u0275\u0275text"](14,"Store Name"),c["\u0275\u0275elementStart"](15,"sup"),c["\u0275\u0275text"](16,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](17,"input",11),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](18,"ion-row"),c["\u0275\u0275elementStart"](19,"ion-col"),c["\u0275\u0275elementStart"](20,"mat-form-field",9),c["\u0275\u0275elementStart"](21,"mat-label"),c["\u0275\u0275text"](22,"WD ID"),c["\u0275\u0275elementStart"](23,"sup"),c["\u0275\u0275text"](24,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](25,"input",12),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](26,"ion-col"),c["\u0275\u0275elementStart"](27,"mat-form-field",9),c["\u0275\u0275elementStart"](28,"mat-label"),c["\u0275\u0275text"](29,"Market Name"),c["\u0275\u0275elementStart"](30,"sup"),c["\u0275\u0275text"](31,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](32,"input",13),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](33,"ion-row"),c["\u0275\u0275elementStart"](34,"ion-col"),c["\u0275\u0275elementStart"](35,"mat-form-field",9),c["\u0275\u0275elementStart"](36,"mat-label"),c["\u0275\u0275text"](37,"Merchandiser Name"),c["\u0275\u0275elementStart"](38,"sup"),c["\u0275\u0275text"](39,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](40,"input",14),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](41,"ion-col"),c["\u0275\u0275elementStart"](42,"mat-form-field",9),c["\u0275\u0275elementStart"](43,"mat-label"),c["\u0275\u0275text"](44,"Visited On"),c["\u0275\u0275elementStart"](45,"sup"),c["\u0275\u0275text"](46,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](47,"input",15),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](48,"ion-col"),c["\u0275\u0275elementStart"](49,"mat-form-field",9),c["\u0275\u0275elementStart"](50,"mat-label"),c["\u0275\u0275text"](51,"Beat Name"),c["\u0275\u0275elementStart"](52,"sup"),c["\u0275\u0275text"](53,"*"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275element"](54,"input",16),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](55,"ion-row"),c["\u0275\u0275template"](56,E,15,9,"ion-col",17),c["\u0275\u0275elementEnd"](),c["\u0275\u0275template"](57,g,5,0,"ion-row",18),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e){var n=c["\u0275\u0275nextContext"]();c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("formGroup",n.formGroup),c["\u0275\u0275advance"](9),c["\u0275\u0275property"]("readonly",!0),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("readonly",n.readOnly),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("readonly",!0),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("readonly",n.readOnly),c["\u0275\u0275advance"](8),c["\u0275\u0275property"]("readonly",!0),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("readonly",n.readOnly),c["\u0275\u0275advance"](7),c["\u0275\u0275property"]("readonly",n.readOnly),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf","VIEW"==n.mode),c["\u0275\u0275advance"](1),c["\u0275\u0275property"]("ngIf","EDIT"==n.mode)}}var x=function(){var t=function(){function t(n,r,a,i){e(this,t),this.inputData=n,this.formBuilder=r,this.baseAPI=a,this._lightbox=i,this.outletHealthScoreProperties=["backwall_door_cleaning_status","backwall_light_repair_request"]}return n(t,[{key:"ngOnInit",value:function(){var e=this.inputData.data.parameters;console.log(e),this.title=e.title,this.imageUrl=e.imgUrl,this.photoLabel=e.photolabel,this.imagesList=e.imgArr,console.log(this.imagesList)}},{key:"loadVisit",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new Map).set("visit_id",this.visit.visit_id),n=this.baseAPI.executeGet({url:""+m.c.visitsList,params:t}).pipe(Object(o.a)((function(e){return e.results})),Object(o.a)((function(e){return e.map((function(e){return r.convertToClientVisit(e)}))}))),e.next=5,n.toPromise();case 5:this.visitResponse=e.sent;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"showVisitDetails",value:function(e,n,r){this.modalService.showModal({component:t,params:{mode:e,visit:n,store:r,title:"Visit Details"},cssClasses:[d.e]})}},{key:"convertToClientVisit",value:function(e){var t={};return t.outletHealthScore=this.fillProperties(this.outletHealthScoreProperties,e.data,{}),t}},{key:"fillProperties",value:function(e,t,n){return e.forEach((function(e){n[e]=t[e]})),console.log("Destination: "+JSON.stringify(n)),n}},{key:"initialisedForm",value:function(e,t){return this.formBuilder.group({outlet_id:[e.visit_id,l.u.required],name:[t.store_name?t.store_name.trim():null,l.u.required],wd_id:[t.wd_id,l.u.required],merchandiser_name:[e.visited_user_name,l.u.required],market_name:[t.market_name,l.u.required],created_at:[e.created_at,l.u.required],beat_name:[e.beat_name,l.u.required]})}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"closed";this.inputData.data.onClose(e,t)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c["\u0275\u0275directiveInject"](s.a),c["\u0275\u0275directiveInject"](l.d),c["\u0275\u0275directiveInject"](u.a),c["\u0275\u0275directiveInject"](p.Lightbox))},t.\u0275cmp=c["\u0275\u0275defineComponent"]({type:t,selectors:[["adj-visit-details"]],viewQuery:function(e,t){var n;1&e&&c["\u0275\u0275viewQuery"](b,!0),2&e&&c["\u0275\u0275queryRefresh"](n=c["\u0275\u0275loadQuery"]())&&(t.slider=n.first)},decls:11,vars:2,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","end"],[3,"click"],["name","close","slot","icon-only"],["style","min-height: 100%;","class","ion-padding white-bg",4,"ngIf"],[1,"ion-padding","white-bg","justify-center",2,"min-height","100%"],[1,"ion-padding","white-bg",2,"min-height","100%"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","outlet_id",3,"readonly"],["matInput","","formControlName","name",3,"readonly"],["matInput","","formControlName","wd_id",3,"readonly"],["matInput","","formControlName","market_name",3,"readonly"],["matInput","","formControlName","merchandiser_name",3,"readonly"],["matInput","","formControlName","created_at",3,"readonly"],["matInput","","formControlName","beat_name",3,"readonly"],["class","ion-margin-bottom",4,"ngIf"],[4,"ngIf"],[1,"ion-margin-bottom"],[1,"mild","ion-margin-bottom"],[1,"ion-no-padding","adjoint-data-grid","mat-elevation-z2","boder-box","white-bg"],[1,"grid-header","sticky-header"],["class","white-bg ion-align-items-center",4,"ngFor","ngForOf"],[1,"white-bg","ion-align-items-center"],[1,"ion-padding-vertical","ion-margin-vertical"],["size","block"]],template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"ion-header",0),c["\u0275\u0275elementStart"](1,"ion-toolbar",1),c["\u0275\u0275elementStart"](2,"ion-buttons",2),c["\u0275\u0275elementStart"](3,"ion-button",3),c["\u0275\u0275listener"]("click",(function(){return t.close()})),c["\u0275\u0275element"](4,"ion-icon",4),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](5,"ion-title"),c["\u0275\u0275text"](6),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementStart"](7,"ion-content"),c["\u0275\u0275template"](8,w,58,10,"div",5),c["\u0275\u0275elementStart"](9,"div",6),c["\u0275\u0275element"](10,"div"),c["\u0275\u0275elementEnd"](),c["\u0275\u0275elementEnd"]()),2&e&&(c["\u0275\u0275advance"](6),c["\u0275\u0275textInterpolate"](t.title),c["\u0275\u0275advance"](2),c["\u0275\u0275property"]("ngIf",0))},directives:[h.l,h.F,h.e,h.d,h.m,h.D,h.i,f.NgIf,l.v,l.p,l.h,h.k,h.x,h.h,v.b,v.e,y.b,l.c,l.o,l.g,f.NgForOf],pipes:[f.UpperCasePipe,f.KeyValuePipe],styles:["[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .justify-center[_ngcontent-%COMP%]{display:flex;justify-content:center}[_nghost-%COMP%]   .imgurl-align[_ngcontent-%COMP%]{width:700px;height:700px}"]}),t}()},ecLg:function(t,r,a){"use strict";a.d(r,"a",(function(){return E}));var i=a("EEI8"),l=a("LRne"),o=a("lJxs"),s=a("6UR0"),m=a("S3p7"),d=a("jrR7"),c=a("BKks"),u=a("fXoL"),p=a("jMvV"),h=a("BD9Z"),f=a("hrw+"),v=a("TEn/"),y=a("ofXK");function b(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"div"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",14),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=t.option;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.name),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.type)}}function S(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"div"),u["\u0275\u0275elementStart"](1,"div"),u["\u0275\u0275text"](2),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](3,"div",14),u["\u0275\u0275text"](4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e){var n=t.option;u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate"](n.name),u["\u0275\u0275advance"](2),u["\u0275\u0275textInterpolate3"]("",n.territory_name," ","|"," ",n.outlet_type_name,"")}}var E=function(){var t=function(){function t(n,r,a,i){e(this,t),this.popover=n,this.orgService=r,this.baseAPI=a,this.inputData=i,this.showFollowCalendar=!1,this.showOnlyMissingVisits=!1,this.showVisitDay=!1,this.apiDirectory=c.c,this.raTypes=[],this.raColors=[]}return n(t,[{key:"ngOnInit",value:function(){var e=new Map;e.set("page_size",100),this.distributorTemplate=this.popover.templateProvider.getTemplate("distributorTemplate");var t=this.inputData.data.parameters.current;this.filter=t?t.copy():new i.a,this.storeType$=this.baseAPI.executeGet({url:c.c.users,params:e}),this.markets$=this.getMarkets(),this.merchantiser$=this.getMerchantiser(),this.day$=Object(l.a)([{id:"MONDAY",name:"Monday"},{id:"TUESDAY",name:"Tuesday"},{id:"WEDNESDAY",name:"Wednesday"},{id:"THURSDAY",name:"Thursday"},{id:"FRIDAY",name:"Friday"},{id:"SATURDAY",name:"Saturday"},{id:"SUNDAY",name:"Sunday"}]),this.week$=Object(l.a)([{id:"1",name:"First week of the month"},{id:"2",name:"Second week of the month"},{id:"3",name:"Third week of the month"},{id:"4",name:"Fourth week of the month"},{id:"5",name:"Fifth week of the month"}]),this.branchList(),this.raTypesList(),this.raColorList(),this.beatsList(),this.organisationNodes$=this.orgService.allOrganisationNodes,this.showStores=this.inputData.data.parameters.showStores,this.typeFiter=this.inputData.data.parameters.type,this.showFollowCalendar=this.inputData.data.parameters.showFollowCalendar,this.showOnlyMissingVisits=this.inputData.data.parameters.showOnlyMissingVisits,this.summaryParams=new Map,this.summaryParams.set("summary","true"),this.summaryParams.set("status","true")}},{key:"reset",value:function(){this.filter=new i.a,this.multiselects&&this.multiselects.forEach((function(e){return e.reset()}))}},{key:"branchList",value:function(){var e=this;(new Map).set("page_size",100),this.baseAPI.executeGet({url:c.c.branchList,params:Object(d.p)({key:"page_size",value:40})}).subscribe((function(t){t.results&&t.results.length&&(e.branchNames=t.results,e.branchNames.map((function(e){e.name=e.branch})))}))}},{key:"raTypesList",value:function(){var e=this;(new Map).set("page_size",100),this.baseAPI.executeGet({url:c.c.raTypesList,params:Object(d.p)({key:"page_size",value:40})}).subscribe((function(t){if(t.results&&t.results.length)for(var n=t.results,r=0;r<n.length;r++)e.raTypes.push({name:n[r]})}))}},{key:"raColorList",value:function(){var e=this;(new Map).set("page_size",100),this.baseAPI.executeGet({url:c.c.raColorList,params:Object(d.p)({key:"page_size",value:40})}).subscribe((function(t){if(t.results&&t.results.length)for(var n=t.results,r=0;r<n.length;r++)e.raColors.push({name:n[r]})}))}},{key:"beatsList",value:function(){var e=this;(new Map).set("page_size",100),this.baseAPI.executeGet({url:c.c.Beats,params:Object(d.p)({key:"page_size",value:40})}).subscribe((function(t){t.results&&t.results.length&&(e.beatsNames=t.results,e.beatsNames.map((function(e){e.name=e.beat_name})))}))}},{key:"close",value:function(){Object(d.k)(this.inputData.data.onClose)&&this.inputData.data.onClose(null,"closed")}},{key:"submit",value:function(){Object(d.k)(this.inputData.data.onClose)&&this.inputData.data.onClose(this.filter,"selected")}},{key:"mapBeat",value:function(e){return Object.assign(Object.assign({},e),{name:""+e.type})}},{key:"handleBeatTypeSelection",value:function(){this.multiselects&&this.multiselects.find((function(e){return"beatName"==e.name})).reset(),this.markets$=this.getMarkets()}},{key:"handleMerchantTypeSelection",value:function(){this.multiselects&&this.multiselects.find((function(e){return"merchantName"==e.name})).reset(),this.merchantiser$=this.getMerchantiser()}},{key:"getMarkets",value:function(){var e=new Map;return Object(d.m)(this.filter.branch)&&e.set("branch",this.filter.nullOrPrimaryKeys(this.filter.branch,(function(e){return e.branch}))),this.baseAPI.get({url:c.c.marketNames,params:e}).pipe(Object(o.a)((function(e){return e.results})))}},{key:"getMerchantiser",value:function(){var e=new Map;return Object(d.m)(this.filter.branch)&&e.set("branch",this.filter.nullOrPrimaryKeys(this.filter.branch,(function(e){return e.branch}))),this.baseAPI.get({url:c.c.merchantiser,params:e}).pipe(Object(o.a)((function(e){return e.results})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(u["\u0275\u0275directiveInject"](p.a),u["\u0275\u0275directiveInject"](h.a),u["\u0275\u0275directiveInject"](f.a),u["\u0275\u0275directiveInject"](m.a))},t.\u0275cmp=u["\u0275\u0275defineComponent"]({type:t,selectors:[["adj-visit-filter"]],viewQuery:function(e,t){var n;1&e&&u["\u0275\u0275viewQuery"](s.a,!0),2&e&&u["\u0275\u0275queryRefresh"](n=u["\u0275\u0275loadQuery"]())&&(t.multiselects=n)},decls:57,vars:13,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","start"],[3,"click"],["name","close","slot","icon-only"],["slot","end"],[1,"white-bg","ion-padding"],[1,"multi-select-form-field","ion-margin-vertical"],[1,"form-field-label"],["mapFn","v=>v",3,"data","selected"],["name","beatName","mapFn","v=>v",3,"viewTemplate","data","selected"],["mapFn","v=>v","name","merchantName",3,"data","viewTemplate","selected"],["beatTemplate",""],["storeTemplate",""],[1,"small-font","mild",2,"padding-top","4px"]],template:function(e,t){if(1&e&&(u["\u0275\u0275elementStart"](0,"ion-header",0),u["\u0275\u0275elementStart"](1,"ion-toolbar",1),u["\u0275\u0275elementStart"](2,"ion-buttons",2),u["\u0275\u0275elementStart"](3,"ion-button",3),u["\u0275\u0275listener"]("click",(function(){return t.close()})),u["\u0275\u0275element"](4,"ion-icon",4),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](5,"ion-title"),u["\u0275\u0275text"](6),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"ion-buttons",5),u["\u0275\u0275elementStart"](8,"ion-button",3),u["\u0275\u0275listener"]("click",(function(){return t.reset()})),u["\u0275\u0275text"](9,"Reset"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](10,"ion-button",3),u["\u0275\u0275listener"]("click",(function(){return t.submit()})),u["\u0275\u0275text"](11,"Apply"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](12,"ion-content"),u["\u0275\u0275elementStart"](13,"div",6),u["\u0275\u0275elementStart"](14,"ion-grid"),u["\u0275\u0275elementStart"](15,"ion-row"),u["\u0275\u0275elementStart"](16,"ion-col"),u["\u0275\u0275elementStart"](17,"div",7),u["\u0275\u0275elementStart"](18,"div",8),u["\u0275\u0275text"](19,"Branch"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"adj-multi-select",9),u["\u0275\u0275listener"]("selected",(function(e){return t.filter.branch=e,t.handleBeatTypeSelection(),t.handleMerchantTypeSelection()})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"ion-row"),u["\u0275\u0275elementStart"](22,"ion-col"),u["\u0275\u0275elementStart"](23,"div",7),u["\u0275\u0275elementStart"](24,"div",8),u["\u0275\u0275text"](25,"Market Name"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](26,"adj-multi-select",10),u["\u0275\u0275listener"]("selected",(function(e){return t.filter.MarketName=e})),u["\u0275\u0275pipe"](27,"async"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](28,"ion-row"),u["\u0275\u0275elementStart"](29,"ion-col"),u["\u0275\u0275elementStart"](30,"div",7),u["\u0275\u0275elementStart"](31,"div",8),u["\u0275\u0275text"](32,"RA Type"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](33,"adj-multi-select",9),u["\u0275\u0275listener"]("selected",(function(e){return t.filter.RAType=e})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](34,"ion-row"),u["\u0275\u0275elementStart"](35,"ion-col"),u["\u0275\u0275elementStart"](36,"div",7),u["\u0275\u0275elementStart"](37,"div",8),u["\u0275\u0275text"](38,"RA Color"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](39,"adj-multi-select",9),u["\u0275\u0275listener"]("selected",(function(e){return t.filter.RAColor=e})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](40,"ion-row"),u["\u0275\u0275elementStart"](41,"ion-col"),u["\u0275\u0275elementStart"](42,"div",7),u["\u0275\u0275elementStart"](43,"div",8),u["\u0275\u0275text"](44,"Beats"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](45,"adj-multi-select",9),u["\u0275\u0275listener"]("selected",(function(e){return t.filter.Beat=e})),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](46,"ion-row"),u["\u0275\u0275elementStart"](47,"ion-col"),u["\u0275\u0275elementStart"](48,"div",7),u["\u0275\u0275elementStart"](49,"div",8),u["\u0275\u0275text"](50,"Merchentiser"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](51,"adj-multi-select",11),u["\u0275\u0275listener"]("selected",(function(e){return t.filter.Merchandiser=e})),u["\u0275\u0275pipe"](52,"async"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275template"](53,b,5,2,"ng-template",null,12,u["\u0275\u0275templateRefExtractor"]),u["\u0275\u0275template"](55,S,5,4,"ng-template",null,13,u["\u0275\u0275templateRefExtractor"])),2&e){var n=u["\u0275\u0275reference"](54);u["\u0275\u0275advance"](6),u["\u0275\u0275textInterpolate"](null==t.inputData.data?null:t.inputData.data.parameters.title),u["\u0275\u0275advance"](14),u["\u0275\u0275property"]("data",t.branchNames),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("viewTemplate",n)("data",u["\u0275\u0275pipeBind1"](27,9,t.markets$)),u["\u0275\u0275advance"](7),u["\u0275\u0275property"]("data",t.raTypes),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("data",t.raColors),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("data",t.beatsNames),u["\u0275\u0275advance"](6),u["\u0275\u0275property"]("data",u["\u0275\u0275pipeBind1"](52,11,t.merchantiser$))("viewTemplate",n)}},directives:[v.l,v.F,v.e,v.d,v.m,v.D,v.i,v.k,v.x,v.h,s.a],pipes:[y.AsyncPipe],styles:[""]}),t}()},xE5a:function(t,r,a){"use strict";a.d(r,"a",(function(){return v}));var i=a("mrSG"),l=a("VfN6"),o=a("he5r"),s=a("2Q4r"),m=a("fXoL"),d=a("CId/"),c=a("TEn/"),u=a("hrw+"),p=a("m8Yb"),h=a("jMvV"),f=a("cjL1"),v=function(){var t=function(){function t(n,r,a,i,l,o,s){e(this,t),this.page=n,this.alertController=r,this.baseAPI=a,this.modalService=i,this.popover=l,this.uiProvider=o,this.sortProvider=s}return n(t,[{key:"ngOnInit",value:function(){this.paginatedListConfig=this.getListConfig()}},{key:"showDateOptions",value:function(e){var t=this;this.popover.showDateOptions({event:e,selectHandler:function(e){t.dateFunction=e.value?e.value.dateFunction:t.dateFunction,t.refresh()}},this.dateFunction)}},{key:"storeSunriseType",value:function(e){console.log(e),this.storeRaType=e.detail.checked?"0":"1",this.refresh()}},{key:"ngAfterViewInit",value:function(){this.refresh()}},{key:"refresh",value:function(){this.paginatedList.setParams(this.getParams()),this.paginatedList.setParams(this.sunriseRaType())}},{key:"sunriseRaType",value:function(){var e=new Map;return e.set("ra_type_group",this.storeRaType),e.set(o.d,this.dateFunction.start()),e.set(o.l,this.dateFunction.end()),e}},{key:"handleResponse",value:function(e){this.totalRecords=e.page.count}},{key:"refreshOnGeoChange",value:function(){return!1}}]),t}();return t.\u0275fac=function(e){return new(e||t)(m["\u0275\u0275directiveInject"](d.a,8),m["\u0275\u0275directiveInject"](c.a),m["\u0275\u0275directiveInject"](u.a),m["\u0275\u0275directiveInject"](p.a),m["\u0275\u0275directiveInject"](h.a),m["\u0275\u0275directiveInject"](h.a),m["\u0275\u0275directiveInject"](f.a))},t.\u0275cmp=m["\u0275\u0275defineComponent"]({type:t,selectors:[["adj-generic-list-component"]],viewQuery:function(e,t){var n;1&e&&m["\u0275\u0275viewQuery"](s.a,!0),2&e&&m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.paginatedList=n.first)},decls:2,vars:0,template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"p"),m["\u0275\u0275text"](1," generic-list-component works!\n"),m["\u0275\u0275elementEnd"]())},styles:[""]}),t=Object(i.b)([Object(l.a)()],t)}()}}])}();