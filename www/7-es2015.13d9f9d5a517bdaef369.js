(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+Sl4":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("pmdr"),r=n("jrR7");class i extends a.a{toQureryMap(){const e=new Map;return e.set("store_type",this.nullOrPrimaryKeys(this.storeType,e=>e.id)),e.set("beat_type",this.nullOrPrimaryKeys(this.beatType,e=>e.id)),e.set("beat_name",this.nullOrPrimaryKeys(this.beatName,e=>e.id)),e.set("distributor",this.nullOrPrimaryKeys(this.distributor,e=>e.id)),e.set("day",this.nullOrPrimaryKeys(this.day,e=>e.id)),e.set("week",this.nullOrPrimaryKeys(this.week,e=>e.id)),e.set("outlet",this.nullOrPrimaryKeys(this.stores,e=>e.outlet_id)),e.set("node",this.nullOrPrimaryKeys(this.node,e=>e.id)),this.onlyDistributorPresent&&e.set("distributor_absent","False"),e}toNameMap(){const e=new Map;return e.set("store_type",this.nullOrNameValue(this.storeType,e=>e.name)),e.set("beat_type",this.nullOrNameValue(this.beatType)),e.set("beat_name",this.nullOrNameValue(this.beatName)),e.set("distributor",this.nullOrNameValue(this.distributor,e=>e.name)),e.set("day",this.nullOrNameValue(this.day)),e.set("week",this.nullOrNameValue(this.week)),e.set("outlet",this.nullOrNameValue(this.stores)),e.set("node",this.nullOrNameValue(this.node,e=>e.name)),this.onlyDistributorPresent&&e.set("distributor_absent","False"),e}copy(){return Object.assign(new i,this)}toIdentifibleIterator(){const e=new Array;return Object(r.m)(this.storeType)&&e.push({name:"Store Type",values:this.storeType.map(e=>({id:e.id+"",name:e.name}))}),Object(r.m)(this.beatType)&&e.push({name:"Beat Type",values:this.beatType}),Object(r.m)(this.beatName)&&e.push({name:"Beat Name",values:this.beatName}),Object(r.m)(this.distributor)&&e.push({name:"Distributors",values:this.distributor.map(e=>({id:e.id+"",name:e.name}))}),Object(r.m)(this.day)&&e.push({name:"Day of delivery",values:this.day.map(e=>({id:e.id+"",name:e.name}))}),Object(r.m)(this.stores)&&e.push({name:"Stores",values:this.stores.map(e=>({id:e.outlet_id+"",name:e.name}))}),Object(r.m)(this.node)&&e.push({name:"Geography",values:this.node.map(e=>({id:e.id+"",name:e.name}))}),this.onlyDistributorPresent&&e.push({name:"Distributor Present",values:[{id:"True",name:"True"}]}),e}}},"4jyP":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("BKks"),r=n("S3p7"),i=n("fXoL"),l=n("hrw+"),s=n("TEn/"),o=n("ofXK");function m(e,t){if(1&e){const e=i["\u0275\u0275getCurrentView"]();i["\u0275\u0275elementStart"](0,"div",15),i["\u0275\u0275elementStart"](1,"div",9),i["\u0275\u0275text"](2),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](3,"img",16),i["\u0275\u0275listener"]("click",(function(){i["\u0275\u0275restoreView"](e);const n=t.$implicit;return i["\u0275\u0275nextContext"]().showSelectedImage(n.image_src,n.image_name)})),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;i["\u0275\u0275advance"](2),i["\u0275\u0275textInterpolate"](e.image_name),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("src",e.image_src,i["\u0275\u0275sanitizeUrl"])}}let d=(()=>{class e{constructor(e,t){this.inputData=e,this.baseAPI=t}ngOnInit(){this.title=this.inputData.data.parameters.title,this.selectedImgUrl="https://firebasestorage.googleapis.com/v0/b/project-sunshine-7c5a0.appspot.com/o/imagesV2%2FVEC50611593865143824%2FVEC0001580891298-side1_counter_front_photo.jpeg?alt=media&token=b17ff4d9-5ad0-4166-8e3d-abb57bf6bc02",this.selectedImageName="Counter",this.baseAPI.executeGet({url:a.c.visitPreImages}).subscribe(e=>{this.imageURLs=e},e=>this.body.error=e)}close(e=null,t="closed"){this.inputData.data.onClose(e,t)}showSelectedImage(e,t){this.selectedImgUrl=e,this.selectedImageName=t}}return e.\u0275fac=function(t){return new(t||e)(i["\u0275\u0275directiveInject"](r.a),i["\u0275\u0275directiveInject"](l.a))},e.\u0275cmp=i["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-image-gallery"]],decls:25,vars:4,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","end"],[3,"click"],["name","close","slot","icon-only"],[1,"main-image-section"],["size","auto"],["fill","clear",2,"margin-top","180px"],["name","arrow-back-outline","slot","icon-only"],[2,"text-align","center","font-weight","bold"],["height","400px","width","750px",3,"src"],["name","arrow-forward-outline","slot","icon-only"],[1,"footer-section"],[2,"white-space","nowrap","overflow-x","scroll"],["style","display: inline-block;",4,"ngFor","ngForOf"],[2,"display","inline-block"],["width","160px","height","150px",2,"padding","12px",3,"src","click"]],template:function(e,t){1&e&&(i["\u0275\u0275elementStart"](0,"ion-header",0),i["\u0275\u0275elementStart"](1,"ion-toolbar",1),i["\u0275\u0275elementStart"](2,"ion-buttons",2),i["\u0275\u0275elementStart"](3,"ion-button",3),i["\u0275\u0275listener"]("click",(function(){return t.close()})),i["\u0275\u0275element"](4,"ion-icon",4),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](5,"ion-title"),i["\u0275\u0275text"](6),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](7,"ion-content"),i["\u0275\u0275elementStart"](8,"div",5),i["\u0275\u0275elementStart"](9,"ion-grid"),i["\u0275\u0275elementStart"](10,"ion-row"),i["\u0275\u0275elementStart"](11,"ion-col",6),i["\u0275\u0275elementStart"](12,"ion-button",7),i["\u0275\u0275element"](13,"ion-icon",8),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](14,"ion-col"),i["\u0275\u0275elementStart"](15,"div"),i["\u0275\u0275elementStart"](16,"div",9),i["\u0275\u0275text"](17),i["\u0275\u0275elementEnd"](),i["\u0275\u0275element"](18,"img",10),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](19,"ion-col",6),i["\u0275\u0275elementStart"](20,"ion-button",7),i["\u0275\u0275element"](21,"ion-icon",11),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementStart"](22,"div",12),i["\u0275\u0275elementStart"](23,"div",13),i["\u0275\u0275template"](24,m,4,2,"div",14),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"](),i["\u0275\u0275elementEnd"]()),2&e&&(i["\u0275\u0275advance"](6),i["\u0275\u0275textInterpolate"](t.title),i["\u0275\u0275advance"](11),i["\u0275\u0275textInterpolate"](t.selectedImageName),i["\u0275\u0275advance"](1),i["\u0275\u0275property"]("src",t.selectedImgUrl,i["\u0275\u0275sanitizeUrl"]),i["\u0275\u0275advance"](6),i["\u0275\u0275property"]("ngForOf",t.imageURLs.results))},directives:[s.l,s.F,s.e,s.d,s.m,s.D,s.i,s.k,s.x,s.h,o.NgForOf],styles:[""]}),e})()},EEI8:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("pmdr"),r=n("jrR7");class i extends a.a{toQureryMap(){const e=new Map;return e.set("branch",this.nullOrPrimaryKeys(this.branch,e=>e.branch_id)),e.set("market_name",this.nullOrPrimaryKeys(this.MarketName,e=>e.id)),e.set("ratype",this.nullOrPrimaryKeys(this.RAType,e=>e.id)),e.set("racolor",this.nullOrPrimaryKeys(this.RAColor,e=>e.id)),e.set("beat",this.nullOrPrimaryKeys(this.Beat,e=>e.id)),e.set("merchantiser",this.nullOrPrimaryKeys(this.Merchandiser,e=>e.id)),e}toNameMap(){const e=new Map;return e.set("branch",this.nullOrPrimaryKeys(this.branch,e=>e.branch_id)),e.set("market_name",this.nullOrPrimaryKeys(this.MarketName,e=>e.id)),e.set("ratype",this.nullOrPrimaryKeys(this.RAType,e=>e.id)),e.set("racolor",this.nullOrPrimaryKeys(this.RAColor,e=>e.id)),e.set("beat",this.nullOrPrimaryKeys(this.Beat,e=>e.id)),e.set("merchantiser",this.nullOrPrimaryKeys(this.Merchandiser,e=>e.id)),e}copy(){return Object.assign(new i,this)}toIdentifibleIterator(){const e=new Array;return Object(r.m)(this.branch)&&e.push({name:"Branch",values:this.branch.map(e=>({id:e.branch_id+"",name:e.branch}))}),Object(r.m)(this.MarketName)&&e.push({name:"Beat Type",values:this.MarketName}),Object(r.m)(this.RAType)&&e.push({name:"Beat Name",values:this.RAType}),Object(r.m)(this.RAColor)&&e.push({name:"Distributors",values:this.RAColor.map(e=>({id:e.id+"",name:e.name}))}),Object(r.m)(this.Beat)&&e.push({name:"Day of delivery",values:this.Beat.map(e=>({id:e.id+"",name:e.name}))}),Object(r.m)(this.Merchandiser)&&e.push({name:"Stores",values:this.Merchandiser.map(e=>({id:e.id+"",name:e.name}))}),e}}},ERDq:function(e,t,n){"use strict";n.d(t,"a",(function(){return _}));var a=n("3Pt+"),r=n("4jyP"),i=n("S3p7"),l=n("jrR7"),s=n("PWCD"),o=n("he5r"),m=n("BKks"),d=n("fXoL"),c=n("hrw+"),p=n("m8Yb"),u=n("BD9Z"),h=n("tyNb"),y=n("TEn/"),S=n("kmnG"),v=n("qFsG"),b=n("ofXK");const f=["class","component"];function E(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"ion-row",26),d["\u0275\u0275elementStart"](1,"ion-col"),d["\u0275\u0275elementStart"](2,"div"),d["\u0275\u0275elementStart"](3,"div"),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"ion-col"),d["\u0275\u0275elementStart"](6,"div"),d["\u0275\u0275elementStart"](7,"div"),d["\u0275\u0275text"](8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](e.element_name),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](e.presence)}}function g(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"ion-col",18),d["\u0275\u0275elementStart"](1,"div",19),d["\u0275\u0275text"](2,"Element Details"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"ion-grid",20),d["\u0275\u0275elementStart"](4,"ion-row",21),d["\u0275\u0275elementStart"](5,"ion-col"),d["\u0275\u0275elementStart"](6,"span"),d["\u0275\u0275text"](7),d["\u0275\u0275pipe"](8,"uppercase"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"ion-col"),d["\u0275\u0275elementStart"](10,"span"),d["\u0275\u0275text"](11),d["\u0275\u0275pipe"](12,"uppercase"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](13,E,9,2,"ion-row",25),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){const e=d["\u0275\u0275nextContext"]();d["\u0275\u0275advance"](7),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](8,3,"Name")),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](12,5,"Presence")),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",e.elements)}}const w=function(e){return["/rainbow/visits",e]};function x(e,t){if(1&e){const e=d["\u0275\u0275getCurrentView"]();d["\u0275\u0275elementStart"](0,"ion-row",27),d["\u0275\u0275listener"]("click",(function(){d["\u0275\u0275restoreView"](e);const n=t.$implicit;return d["\u0275\u0275nextContext"]().myRoute(n)})),d["\u0275\u0275elementStart"](1,"ion-col"),d["\u0275\u0275elementStart"](2,"div"),d["\u0275\u0275elementStart"](3,"div"),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"ion-col"),d["\u0275\u0275elementStart"](6,"div"),d["\u0275\u0275elementStart"](7,"div"),d["\u0275\u0275text"](8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](9,"ion-col"),d["\u0275\u0275elementStart"](10,"div"),d["\u0275\u0275elementStart"](11,"div"),d["\u0275\u0275text"](12),d["\u0275\u0275pipe"](13,"date"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()}if(2&e){const e=t.$implicit;d["\u0275\u0275property"]("routerLink",d["\u0275\u0275pureFunction1"](6,w,e.visit_id)),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](e.visit_id),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](e.visited_user_name),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](13,4,e.visit_date))}}function I(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"ion-row"),d["\u0275\u0275elementStart"](1,"ion-col"),d["\u0275\u0275elementStart"](2,"div",28),d["\u0275\u0275elementStart"](3,"ion-button",29),d["\u0275\u0275text"](4,"Submit"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]())}function O(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"div"),d["\u0275\u0275text"](2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"div",30),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){const e=t.option;d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.name),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.type)}}let _=(()=>{class e{constructor(e,t,n,a,r,i,l){this.inputData=e,this.formBuilder=t,this.baseAPI=n,this.modalService=a,this.orgService=r,this.route=i,this.router=l,this.title="Store Details",this.allowDataPass=!1,this.subscription=this.route.url.subscribe(e=>{this.storeId=e[0]?e[0].path:""})}ngOnInit(){this.formGroup=this.initialisedForm(""),this.visitIdData(this.storeId),this.readOnly="VIEW"==this.mode}myRoute(e){this.router.navigate(["/rainbow/visits",e.visit_id])&&(this.orgService.myIndex=456)}myRoute1(e){this.router.navigate(["/rainbow/visits"])&&(this.orgService.myIndex=456)}visitIdData(e){this.subscription=this.baseAPI.executeGet({url:m.c.storeDetailList,params:Object(l.p)({key:"store_id",value:e},{key:"page_size",value:40})}).subscribe(e=>{this.storeData=e.results,this.visits=e.results.visit_details,this.elements=e.results.element_details,console.log(this.storeData),this.storeData&&(this.formGroup=this.initialisedForm(this.storeData)),setTimeout(()=>{this.allowDataPass=!0},500)},e=>this.body.error=e)}showElementImages(e,t){this.modalService.showModal({component:r.a,params:{mode:e,element:t,title:"Element Image"},cssClasses:[o.a]})}initialisedForm(e){return this.formBuilder.group({dhanush_id:[e.dhanush_id,a.u.required],name:[e.store_name?e.store_name.trim():null,a.u.required],branch:[e.branch],market_name:[e.market_name],owner_name:[e.owner_name],contact_no:[e.owner_mobile,a.u.required],alternate_no:[e.alternate_no],store_status:[{value:e.store_status,disabled:this.readOnly},a.u.required],beat_name:[e.beat_name],wd_id:[e.wd_id],created_at:[e.updated_on],outlet_type:[e.outlet_type,a.u.required]})}close(){this.router.navigate(["/rainbow/stores"])}showVisitDetails(e,t,n){this.modalService.showModal({component:s.a,params:{mode:e,visit:t,store:n,title:"Visit Details"},cssClasses:[o.e]})}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](i.a),d["\u0275\u0275directiveInject"](a.d),d["\u0275\u0275directiveInject"](c.a),d["\u0275\u0275directiveInject"](p.a),d["\u0275\u0275directiveInject"](u.a),d["\u0275\u0275directiveInject"](h.a),d["\u0275\u0275directiveInject"](h.h))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-store-details",8,"component"]],attrs:f,decls:95,vars:23,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","start"],[3,"click"],["name","arrow-back-outline","slot","icon-only"],[1,"ion-padding","white-bg",2,"min-height","100%"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","dhanush_id",3,"readonly"],["matInput","","formControlName","name",3,"readonly"],["matInput","","formControlName","branch",3,"readonly"],["matInput","","formControlName","market_name",3,"readonly"],["matInput","","formControlName","owner_name",3,"readonly"],["matInput","","formControlName","contact_no",3,"readonly"],["matInput","","formControlName","wd_id",3,"readonly"],["matInput","","formControlName","beat_name",3,"readonly"],["matInput","","formControlName","created_at",3,"readonly"],["class","ion-margin-bottom",4,"ngIf"],[1,"ion-margin-bottom"],[1,"mild","ion-margin-bottom"],[1,"ion-no-padding","adjoint-data-grid","mat-elevation-z2","boder-box","white-bg"],[1,"grid-header","sticky-header"],["class","white-bg ion-align-items-center",3,"routerLink","click",4,"ngFor","ngForOf"],[4,"ngIf"],["beatItem",""],["class","white-bg ion-align-items-center",4,"ngFor","ngForOf"],[1,"white-bg","ion-align-items-center"],[1,"white-bg","ion-align-items-center",3,"routerLink","click"],[1,"ion-padding-vertical","ion-margin-vertical"],["size","block"],[1,"small-font","mild",2,"padding-top","4px"]],template:function(e,t){1&e&&(d["\u0275\u0275elementStart"](0,"ion-header",0),d["\u0275\u0275elementStart"](1,"ion-toolbar",1),d["\u0275\u0275elementStart"](2,"ion-buttons",2),d["\u0275\u0275elementStart"](3,"ion-button",3),d["\u0275\u0275listener"]("click",(function(){return t.close()})),d["\u0275\u0275element"](4,"ion-icon",4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"ion-title"),d["\u0275\u0275text"](6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"ion-content"),d["\u0275\u0275elementStart"](8,"div",5),d["\u0275\u0275elementStart"](9,"form",6),d["\u0275\u0275elementStart"](10,"ion-grid"),d["\u0275\u0275elementStart"](11,"ion-row"),d["\u0275\u0275elementStart"](12,"ion-col"),d["\u0275\u0275elementStart"](13,"mat-form-field",7),d["\u0275\u0275elementStart"](14,"mat-label"),d["\u0275\u0275text"](15,"Dhanush ID"),d["\u0275\u0275elementStart"](16,"sup"),d["\u0275\u0275text"](17,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](18,"input",8),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](19,"ion-col"),d["\u0275\u0275elementStart"](20,"mat-form-field",7),d["\u0275\u0275elementStart"](21,"mat-label"),d["\u0275\u0275text"](22,"Store Name"),d["\u0275\u0275elementStart"](23,"sup"),d["\u0275\u0275text"](24,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](25,"input",9),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](26,"ion-col"),d["\u0275\u0275elementStart"](27,"mat-form-field",7),d["\u0275\u0275elementStart"](28,"mat-label"),d["\u0275\u0275text"](29,"Branch"),d["\u0275\u0275elementStart"](30,"sup"),d["\u0275\u0275text"](31,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](32,"input",10),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](33,"ion-row"),d["\u0275\u0275elementStart"](34,"ion-col"),d["\u0275\u0275elementStart"](35,"mat-form-field",7),d["\u0275\u0275elementStart"](36,"mat-label"),d["\u0275\u0275text"](37,"Market Name"),d["\u0275\u0275elementStart"](38,"sup"),d["\u0275\u0275text"](39,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](40,"input",11),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](41,"ion-col"),d["\u0275\u0275elementStart"](42,"mat-form-field",7),d["\u0275\u0275elementStart"](43,"mat-label"),d["\u0275\u0275text"](44,"Owner Name"),d["\u0275\u0275elementStart"](45,"sup"),d["\u0275\u0275text"](46,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](47,"input",12),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](48,"ion-col"),d["\u0275\u0275elementStart"](49,"mat-form-field",7),d["\u0275\u0275elementStart"](50,"mat-label"),d["\u0275\u0275text"](51,"Owner Mobile Number"),d["\u0275\u0275elementStart"](52,"sup"),d["\u0275\u0275text"](53,"*"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](54,"input",13),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](55,"ion-row"),d["\u0275\u0275elementStart"](56,"ion-col"),d["\u0275\u0275elementStart"](57,"mat-form-field",7),d["\u0275\u0275elementStart"](58,"mat-label"),d["\u0275\u0275text"](59,"WD ID"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](60,"input",14),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](61,"ion-col"),d["\u0275\u0275elementStart"](62,"mat-form-field",7),d["\u0275\u0275elementStart"](63,"mat-label"),d["\u0275\u0275text"](64,"Beat Name"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](65,"input",15),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](66,"ion-col"),d["\u0275\u0275elementStart"](67,"mat-form-field",7),d["\u0275\u0275elementStart"](68,"mat-label"),d["\u0275\u0275text"](69,"Last Visited"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275element"](70,"input",16),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](71,"ion-row"),d["\u0275\u0275template"](72,g,14,7,"ion-col",17),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](73,"ion-row"),d["\u0275\u0275elementStart"](74,"ion-col",18),d["\u0275\u0275elementStart"](75,"div",19),d["\u0275\u0275text"](76,"Visits"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](77,"ion-grid",20),d["\u0275\u0275elementStart"](78,"ion-row",21),d["\u0275\u0275elementStart"](79,"ion-col"),d["\u0275\u0275elementStart"](80,"span"),d["\u0275\u0275text"](81),d["\u0275\u0275pipe"](82,"uppercase"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](83,"ion-col"),d["\u0275\u0275elementStart"](84,"span"),d["\u0275\u0275text"](85),d["\u0275\u0275pipe"](86,"uppercase"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](87,"ion-col"),d["\u0275\u0275elementStart"](88,"span"),d["\u0275\u0275text"](89),d["\u0275\u0275pipe"](90,"uppercase"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](91,x,14,8,"ion-row",22),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](92,I,5,0,"ion-row",23),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](93,O,5,2,"ng-template",null,24,d["\u0275\u0275templateRefExtractor"])),2&e&&(d["\u0275\u0275advance"](6),d["\u0275\u0275textInterpolate"](t.title),d["\u0275\u0275advance"](3),d["\u0275\u0275property"]("formGroup",t.formGroup),d["\u0275\u0275advance"](9),d["\u0275\u0275property"]("readonly",!0),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("readonly",t.readOnly),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("readonly",t.readOnly),d["\u0275\u0275advance"](8),d["\u0275\u0275property"]("readonly",t.readOnly),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("readonly",t.readOnly),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("readonly",t.readOnly),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("readonly",t.readOnly),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("readonly",t.readOnly),d["\u0275\u0275advance"](5),d["\u0275\u0275property"]("readonly",t.readOnly),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngIf","VIEW"==t.mode),d["\u0275\u0275advance"](9),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](82,17,"Visit ID")),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](86,19,"Name")),d["\u0275\u0275advance"](4),d["\u0275\u0275textInterpolate"](d["\u0275\u0275pipeBind1"](90,21,"Visited On")),d["\u0275\u0275advance"](2),d["\u0275\u0275property"]("ngForOf",t.visits),d["\u0275\u0275advance"](1),d["\u0275\u0275property"]("ngIf","EDIT"==t.mode))},directives:[y.l,y.F,y.e,y.d,y.m,y.D,y.i,a.v,a.p,a.h,y.k,y.x,y.h,S.b,S.e,v.b,a.c,a.o,a.g,b.NgIf,b.NgForOf,y.M,h.i],pipes:[b.UpperCasePipe,b.DatePipe],styles:["[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),e})()},PWCD:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var a=n("mrSG"),r=n("3Pt+"),i=n("lJxs"),l=n("S3p7"),s=n("BKks"),o=n("he5r"),m=n("fXoL"),d=n("hrw+"),c=n("m3o8"),p=n("TEn/"),u=n("ofXK"),h=n("kmnG"),y=n("qFsG");const S=["nav"];function v(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"ion-row",24),m["\u0275\u0275elementStart"](1,"ion-col"),m["\u0275\u0275elementStart"](2,"div"),m["\u0275\u0275elementStart"](3,"div"),m["\u0275\u0275text"](4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"ion-col"),m["\u0275\u0275elementStart"](6,"div"),m["\u0275\u0275elementStart"](7,"div"),m["\u0275\u0275text"](8),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=t.$implicit;m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](e.key),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](e.value)}}function b(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"ion-col",19),m["\u0275\u0275elementStart"](1,"div",20),m["\u0275\u0275text"](2,"Outlet Health Score"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](3,"ion-grid",21),m["\u0275\u0275elementStart"](4,"ion-row",22),m["\u0275\u0275elementStart"](5,"ion-col"),m["\u0275\u0275elementStart"](6,"span"),m["\u0275\u0275text"](7),m["\u0275\u0275pipe"](8,"uppercase"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](9,"ion-col"),m["\u0275\u0275elementStart"](10,"span"),m["\u0275\u0275text"](11),m["\u0275\u0275pipe"](12,"uppercase"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](13,v,9,2,"ion-row",23),m["\u0275\u0275pipe"](14,"keyvalue"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275nextContext"](2);m["\u0275\u0275advance"](7),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](8,3,"Element")),m["\u0275\u0275advance"](4),m["\u0275\u0275textInterpolate"](m["\u0275\u0275pipeBind1"](12,5,"Value")),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngForOf",m["\u0275\u0275pipeBind1"](14,7,e.visitResponse[0].outletHealthScore))}}function f(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ion-row"),m["\u0275\u0275elementStart"](1,"ion-col"),m["\u0275\u0275elementStart"](2,"div",25),m["\u0275\u0275elementStart"](3,"ion-button",26),m["\u0275\u0275text"](4,"Submit"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]())}function E(e,t){if(1&e&&(m["\u0275\u0275elementStart"](0,"div",7),m["\u0275\u0275elementStart"](1,"form",8),m["\u0275\u0275elementStart"](2,"ion-grid"),m["\u0275\u0275elementStart"](3,"ion-row"),m["\u0275\u0275elementStart"](4,"ion-col"),m["\u0275\u0275elementStart"](5,"mat-form-field",9),m["\u0275\u0275elementStart"](6,"mat-label"),m["\u0275\u0275text"](7,"Visit ID"),m["\u0275\u0275elementStart"](8,"sup"),m["\u0275\u0275text"](9,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](10,"input",10),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](11,"ion-col"),m["\u0275\u0275elementStart"](12,"mat-form-field",9),m["\u0275\u0275elementStart"](13,"mat-label"),m["\u0275\u0275text"](14,"Store Name"),m["\u0275\u0275elementStart"](15,"sup"),m["\u0275\u0275text"](16,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](17,"input",11),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](18,"ion-row"),m["\u0275\u0275elementStart"](19,"ion-col"),m["\u0275\u0275elementStart"](20,"mat-form-field",9),m["\u0275\u0275elementStart"](21,"mat-label"),m["\u0275\u0275text"](22,"WD ID"),m["\u0275\u0275elementStart"](23,"sup"),m["\u0275\u0275text"](24,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](25,"input",12),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](26,"ion-col"),m["\u0275\u0275elementStart"](27,"mat-form-field",9),m["\u0275\u0275elementStart"](28,"mat-label"),m["\u0275\u0275text"](29,"Market Name"),m["\u0275\u0275elementStart"](30,"sup"),m["\u0275\u0275text"](31,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](32,"input",13),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](33,"ion-row"),m["\u0275\u0275elementStart"](34,"ion-col"),m["\u0275\u0275elementStart"](35,"mat-form-field",9),m["\u0275\u0275elementStart"](36,"mat-label"),m["\u0275\u0275text"](37,"Merchandiser Name"),m["\u0275\u0275elementStart"](38,"sup"),m["\u0275\u0275text"](39,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](40,"input",14),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](41,"ion-col"),m["\u0275\u0275elementStart"](42,"mat-form-field",9),m["\u0275\u0275elementStart"](43,"mat-label"),m["\u0275\u0275text"](44,"Visited On"),m["\u0275\u0275elementStart"](45,"sup"),m["\u0275\u0275text"](46,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](47,"input",15),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](48,"ion-col"),m["\u0275\u0275elementStart"](49,"mat-form-field",9),m["\u0275\u0275elementStart"](50,"mat-label"),m["\u0275\u0275text"](51,"Beat Name"),m["\u0275\u0275elementStart"](52,"sup"),m["\u0275\u0275text"](53,"*"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275element"](54,"input",16),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](55,"ion-row"),m["\u0275\u0275template"](56,b,15,9,"ion-col",17),m["\u0275\u0275elementEnd"](),m["\u0275\u0275template"](57,f,5,0,"ion-row",18),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e){const e=m["\u0275\u0275nextContext"]();m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("formGroup",e.formGroup),m["\u0275\u0275advance"](9),m["\u0275\u0275property"]("readonly",!0),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("readonly",e.readOnly),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("readonly",!0),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("readonly",e.readOnly),m["\u0275\u0275advance"](8),m["\u0275\u0275property"]("readonly",!0),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("readonly",e.readOnly),m["\u0275\u0275advance"](7),m["\u0275\u0275property"]("readonly",e.readOnly),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf","VIEW"==e.mode),m["\u0275\u0275advance"](1),m["\u0275\u0275property"]("ngIf","EDIT"==e.mode)}}let g=(()=>{class e{constructor(e,t,n,a){this.inputData=e,this.formBuilder=t,this.baseAPI=n,this._lightbox=a,this.outletHealthScoreProperties=["backwall_door_cleaning_status","backwall_light_repair_request"]}ngOnInit(){const e=this.inputData.data.parameters;console.log(e),this.title=e.title,this.imageUrl=e.imgUrl,this.photoLabel=e.photolabel,this.imagesList=e.imgArr,console.log(this.imagesList)}loadVisit(){return Object(a.a)(this,void 0,void 0,(function*(){const e=new Map;e.set("visit_id",this.visit.visit_id);const t=this.baseAPI.executeGet({url:""+s.c.visitsList,params:e}).pipe(Object(i.a)(e=>e.results),Object(i.a)(e=>e.map(e=>this.convertToClientVisit(e))));this.visitResponse=yield t.toPromise()}))}showVisitDetails(t,n,a){this.modalService.showModal({component:e,params:{mode:t,visit:n,store:a,title:"Visit Details"},cssClasses:[o.e]})}convertToClientVisit(e){const t={};return t.outletHealthScore=this.fillProperties(this.outletHealthScoreProperties,e.data,{}),t}fillProperties(e,t,n){return e.forEach(e=>{n[e]=t[e]}),console.log("Destination: "+JSON.stringify(n)),n}initialisedForm(e,t){return this.formBuilder.group({outlet_id:[e.visit_id,r.u.required],name:[t.store_name?t.store_name.trim():null,r.u.required],wd_id:[t.wd_id,r.u.required],merchandiser_name:[e.visited_user_name,r.u.required],market_name:[t.market_name,r.u.required],created_at:[e.created_at,r.u.required],beat_name:[e.beat_name,r.u.required]})}close(e=null,t="closed"){this.inputData.data.onClose(e,t)}}return e.\u0275fac=function(t){return new(t||e)(m["\u0275\u0275directiveInject"](l.a),m["\u0275\u0275directiveInject"](r.d),m["\u0275\u0275directiveInject"](d.a),m["\u0275\u0275directiveInject"](c.Lightbox))},e.\u0275cmp=m["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-visit-details"]],viewQuery:function(e,t){var n;1&e&&m["\u0275\u0275viewQuery"](S,!0),2&e&&m["\u0275\u0275queryRefresh"](n=m["\u0275\u0275loadQuery"]())&&(t.slider=n.first)},decls:11,vars:2,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","end"],[3,"click"],["name","close","slot","icon-only"],["style","min-height: 100%;","class","ion-padding white-bg",4,"ngIf"],[1,"ion-padding","white-bg","justify-center",2,"min-height","100%"],[1,"ion-padding","white-bg",2,"min-height","100%"],[3,"formGroup"],["appearance","outline"],["matInput","","formControlName","outlet_id",3,"readonly"],["matInput","","formControlName","name",3,"readonly"],["matInput","","formControlName","wd_id",3,"readonly"],["matInput","","formControlName","market_name",3,"readonly"],["matInput","","formControlName","merchandiser_name",3,"readonly"],["matInput","","formControlName","created_at",3,"readonly"],["matInput","","formControlName","beat_name",3,"readonly"],["class","ion-margin-bottom",4,"ngIf"],[4,"ngIf"],[1,"ion-margin-bottom"],[1,"mild","ion-margin-bottom"],[1,"ion-no-padding","adjoint-data-grid","mat-elevation-z2","boder-box","white-bg"],[1,"grid-header","sticky-header"],["class","white-bg ion-align-items-center",4,"ngFor","ngForOf"],[1,"white-bg","ion-align-items-center"],[1,"ion-padding-vertical","ion-margin-vertical"],["size","block"]],template:function(e,t){1&e&&(m["\u0275\u0275elementStart"](0,"ion-header",0),m["\u0275\u0275elementStart"](1,"ion-toolbar",1),m["\u0275\u0275elementStart"](2,"ion-buttons",2),m["\u0275\u0275elementStart"](3,"ion-button",3),m["\u0275\u0275listener"]("click",(function(){return t.close()})),m["\u0275\u0275element"](4,"ion-icon",4),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](5,"ion-title"),m["\u0275\u0275text"](6),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementStart"](7,"ion-content"),m["\u0275\u0275template"](8,E,58,10,"div",5),m["\u0275\u0275elementStart"](9,"div",6),m["\u0275\u0275element"](10,"div"),m["\u0275\u0275elementEnd"](),m["\u0275\u0275elementEnd"]()),2&e&&(m["\u0275\u0275advance"](6),m["\u0275\u0275textInterpolate"](t.title),m["\u0275\u0275advance"](2),m["\u0275\u0275property"]("ngIf",0))},directives:[p.l,p.F,p.e,p.d,p.m,p.D,p.i,u.NgIf,r.v,r.p,r.h,p.k,p.x,p.h,h.b,h.e,y.b,r.c,r.o,r.g,u.NgForOf],pipes:[u.UpperCasePipe,u.KeyValuePipe],styles:["[_nghost-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .justify-center[_ngcontent-%COMP%]{display:flex;justify-content:center}[_nghost-%COMP%]   .imgurl-align[_ngcontent-%COMP%]{width:700px;height:700px}"]}),e})()},ecLg:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n("EEI8"),r=n("LRne"),i=n("lJxs"),l=n("6UR0"),s=n("S3p7"),o=n("jrR7"),m=n("BKks"),d=n("fXoL"),c=n("jMvV"),p=n("BD9Z"),u=n("hrw+"),h=n("TEn/"),y=n("ofXK");function S(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"div"),d["\u0275\u0275text"](2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"div",14),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){const e=t.option;d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.name),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.type)}}function v(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"div"),d["\u0275\u0275elementStart"](1,"div"),d["\u0275\u0275text"](2),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](3,"div",14),d["\u0275\u0275text"](4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"]()),2&e){const e=t.option;d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate"](e.name),d["\u0275\u0275advance"](2),d["\u0275\u0275textInterpolate3"]("",e.territory_name," ","|"," ",e.outlet_type_name,"")}}let b=(()=>{class e{constructor(e,t,n,a){this.popover=e,this.orgService=t,this.baseAPI=n,this.inputData=a,this.showFollowCalendar=!1,this.showOnlyMissingVisits=!1,this.showVisitDay=!1,this.apiDirectory=m.c,this.raTypes=[],this.raColors=[]}ngOnInit(){const e=new Map;e.set("page_size",100),this.distributorTemplate=this.popover.templateProvider.getTemplate("distributorTemplate");const t=this.inputData.data.parameters.current;this.filter=t?t.copy():new a.a,this.storeType$=this.baseAPI.executeGet({url:m.c.users,params:e}),this.markets$=this.getMarkets(),this.merchantiser$=this.getMerchantiser(),this.day$=Object(r.a)([{id:"MONDAY",name:"Monday"},{id:"TUESDAY",name:"Tuesday"},{id:"WEDNESDAY",name:"Wednesday"},{id:"THURSDAY",name:"Thursday"},{id:"FRIDAY",name:"Friday"},{id:"SATURDAY",name:"Saturday"},{id:"SUNDAY",name:"Sunday"}]),this.week$=Object(r.a)([{id:"1",name:"First week of the month"},{id:"2",name:"Second week of the month"},{id:"3",name:"Third week of the month"},{id:"4",name:"Fourth week of the month"},{id:"5",name:"Fifth week of the month"}]),this.branchList(),this.raTypesList(),this.raColorList(),this.beatsList(),this.organisationNodes$=this.orgService.allOrganisationNodes,this.showStores=this.inputData.data.parameters.showStores,this.typeFiter=this.inputData.data.parameters.type,this.showFollowCalendar=this.inputData.data.parameters.showFollowCalendar,this.showOnlyMissingVisits=this.inputData.data.parameters.showOnlyMissingVisits,this.summaryParams=new Map,this.summaryParams.set("summary","true"),this.summaryParams.set("status","true")}reset(){this.filter=new a.a,this.multiselects&&this.multiselects.forEach(e=>e.reset())}branchList(){(new Map).set("page_size",100),this.baseAPI.executeGet({url:m.c.branchList,params:Object(o.p)({key:"page_size",value:40})}).subscribe(e=>{e.results&&e.results.length&&(this.branchNames=e.results,this.branchNames.map(e=>{e.name=e.branch}))})}raTypesList(){(new Map).set("page_size",100),this.baseAPI.executeGet({url:m.c.raTypesList,params:Object(o.p)({key:"page_size",value:40})}).subscribe(e=>{if(e.results&&e.results.length){let t=e.results;for(let e=0;e<t.length;e++)this.raTypes.push({name:t[e]})}})}raColorList(){(new Map).set("page_size",100),this.baseAPI.executeGet({url:m.c.raColorList,params:Object(o.p)({key:"page_size",value:40})}).subscribe(e=>{if(e.results&&e.results.length){let t=e.results;for(let e=0;e<t.length;e++)this.raColors.push({name:t[e]})}})}beatsList(){(new Map).set("page_size",100),this.baseAPI.executeGet({url:m.c.Beats,params:Object(o.p)({key:"page_size",value:40})}).subscribe(e=>{e.results&&e.results.length&&(this.beatsNames=e.results,this.beatsNames.map(e=>{e.name=e.beat_name}))})}close(){Object(o.k)(this.inputData.data.onClose)&&this.inputData.data.onClose(null,"closed")}submit(){Object(o.k)(this.inputData.data.onClose)&&this.inputData.data.onClose(this.filter,"selected")}mapBeat(e){return Object.assign(Object.assign({},e),{name:""+e.type})}handleBeatTypeSelection(){this.multiselects&&this.multiselects.find(e=>"beatName"==e.name).reset(),this.markets$=this.getMarkets()}handleMerchantTypeSelection(){this.multiselects&&this.multiselects.find(e=>"merchantName"==e.name).reset(),this.merchantiser$=this.getMerchantiser()}getMarkets(){const e=new Map;return Object(o.m)(this.filter.branch)&&e.set("branch",this.filter.nullOrPrimaryKeys(this.filter.branch,e=>e.branch)),this.baseAPI.get({url:m.c.marketNames,params:e}).pipe(Object(i.a)(e=>e.results))}getMerchantiser(){const e=new Map;return Object(o.m)(this.filter.branch)&&e.set("branch",this.filter.nullOrPrimaryKeys(this.filter.branch,e=>e.branch)),this.baseAPI.get({url:m.c.merchantiser,params:e}).pipe(Object(i.a)(e=>e.results))}}return e.\u0275fac=function(t){return new(t||e)(d["\u0275\u0275directiveInject"](c.a),d["\u0275\u0275directiveInject"](p.a),d["\u0275\u0275directiveInject"](u.a),d["\u0275\u0275directiveInject"](s.a))},e.\u0275cmp=d["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-visit-filter"]],viewQuery:function(e,t){var n;1&e&&d["\u0275\u0275viewQuery"](l.a,!0),2&e&&d["\u0275\u0275queryRefresh"](n=d["\u0275\u0275loadQuery"]())&&(t.multiselects=n)},decls:57,vars:13,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","start"],[3,"click"],["name","close","slot","icon-only"],["slot","end"],[1,"white-bg","ion-padding"],[1,"multi-select-form-field","ion-margin-vertical"],[1,"form-field-label"],["mapFn","v=>v",3,"data","selected"],["name","beatName","mapFn","v=>v",3,"viewTemplate","data","selected"],["mapFn","v=>v","name","merchantName",3,"data","viewTemplate","selected"],["beatTemplate",""],["storeTemplate",""],[1,"small-font","mild",2,"padding-top","4px"]],template:function(e,t){if(1&e&&(d["\u0275\u0275elementStart"](0,"ion-header",0),d["\u0275\u0275elementStart"](1,"ion-toolbar",1),d["\u0275\u0275elementStart"](2,"ion-buttons",2),d["\u0275\u0275elementStart"](3,"ion-button",3),d["\u0275\u0275listener"]("click",(function(){return t.close()})),d["\u0275\u0275element"](4,"ion-icon",4),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](5,"ion-title"),d["\u0275\u0275text"](6),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](7,"ion-buttons",5),d["\u0275\u0275elementStart"](8,"ion-button",3),d["\u0275\u0275listener"]("click",(function(){return t.reset()})),d["\u0275\u0275text"](9,"Reset"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](10,"ion-button",3),d["\u0275\u0275listener"]("click",(function(){return t.submit()})),d["\u0275\u0275text"](11,"Apply"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](12,"ion-content"),d["\u0275\u0275elementStart"](13,"div",6),d["\u0275\u0275elementStart"](14,"ion-grid"),d["\u0275\u0275elementStart"](15,"ion-row"),d["\u0275\u0275elementStart"](16,"ion-col"),d["\u0275\u0275elementStart"](17,"div",7),d["\u0275\u0275elementStart"](18,"div",8),d["\u0275\u0275text"](19,"Branch"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](20,"adj-multi-select",9),d["\u0275\u0275listener"]("selected",(function(e){return t.filter.branch=e,t.handleBeatTypeSelection(),t.handleMerchantTypeSelection()})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](21,"ion-row"),d["\u0275\u0275elementStart"](22,"ion-col"),d["\u0275\u0275elementStart"](23,"div",7),d["\u0275\u0275elementStart"](24,"div",8),d["\u0275\u0275text"](25,"Market Name"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](26,"adj-multi-select",10),d["\u0275\u0275listener"]("selected",(function(e){return t.filter.MarketName=e})),d["\u0275\u0275pipe"](27,"async"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](28,"ion-row"),d["\u0275\u0275elementStart"](29,"ion-col"),d["\u0275\u0275elementStart"](30,"div",7),d["\u0275\u0275elementStart"](31,"div",8),d["\u0275\u0275text"](32,"RA Type"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](33,"adj-multi-select",9),d["\u0275\u0275listener"]("selected",(function(e){return t.filter.RAType=e})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](34,"ion-row"),d["\u0275\u0275elementStart"](35,"ion-col"),d["\u0275\u0275elementStart"](36,"div",7),d["\u0275\u0275elementStart"](37,"div",8),d["\u0275\u0275text"](38,"RA Color"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](39,"adj-multi-select",9),d["\u0275\u0275listener"]("selected",(function(e){return t.filter.RAColor=e})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](40,"ion-row"),d["\u0275\u0275elementStart"](41,"ion-col"),d["\u0275\u0275elementStart"](42,"div",7),d["\u0275\u0275elementStart"](43,"div",8),d["\u0275\u0275text"](44,"Beats"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](45,"adj-multi-select",9),d["\u0275\u0275listener"]("selected",(function(e){return t.filter.Beat=e})),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](46,"ion-row"),d["\u0275\u0275elementStart"](47,"ion-col"),d["\u0275\u0275elementStart"](48,"div",7),d["\u0275\u0275elementStart"](49,"div",8),d["\u0275\u0275text"](50,"Merchentiser"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementStart"](51,"adj-multi-select",11),d["\u0275\u0275listener"]("selected",(function(e){return t.filter.Merchandiser=e})),d["\u0275\u0275pipe"](52,"async"),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275elementEnd"](),d["\u0275\u0275template"](53,S,5,2,"ng-template",null,12,d["\u0275\u0275templateRefExtractor"]),d["\u0275\u0275template"](55,v,5,4,"ng-template",null,13,d["\u0275\u0275templateRefExtractor"])),2&e){const e=d["\u0275\u0275reference"](54);d["\u0275\u0275advance"](6),d["\u0275\u0275textInterpolate"](null==t.inputData.data?null:t.inputData.data.parameters.title),d["\u0275\u0275advance"](14),d["\u0275\u0275property"]("data",t.branchNames),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("viewTemplate",e)("data",d["\u0275\u0275pipeBind1"](27,9,t.markets$)),d["\u0275\u0275advance"](7),d["\u0275\u0275property"]("data",t.raTypes),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("data",t.raColors),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("data",t.beatsNames),d["\u0275\u0275advance"](6),d["\u0275\u0275property"]("data",d["\u0275\u0275pipeBind1"](52,11,t.merchantiser$))("viewTemplate",e)}},directives:[h.l,h.F,h.e,h.d,h.m,h.D,h.i,h.k,h.x,h.h,l.a],pipes:[y.AsyncPipe],styles:[""]}),e})()},xE5a:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n("mrSG"),r=n("VfN6"),i=n("he5r"),l=n("2Q4r"),s=n("fXoL"),o=n("CId/"),m=n("TEn/"),d=n("hrw+"),c=n("m8Yb"),p=n("jMvV"),u=n("cjL1");let h=(()=>{let e=class{constructor(e,t,n,a,r,i,l){this.page=e,this.alertController=t,this.baseAPI=n,this.modalService=a,this.popover=r,this.uiProvider=i,this.sortProvider=l}ngOnInit(){this.paginatedListConfig=this.getListConfig()}showDateOptions(e){this.popover.showDateOptions({event:e,selectHandler:e=>{this.dateFunction=e.value?e.value.dateFunction:this.dateFunction,this.refresh()}},this.dateFunction)}storeSunriseType(e){console.log(e),this.storeRaType=e.detail.checked?"0":"1",this.refresh()}ngAfterViewInit(){this.refresh()}refresh(){this.paginatedList.setParams(this.getParams()),this.paginatedList.setParams(this.sunriseRaType())}sunriseRaType(){const e=new Map;return e.set("ra_type_group",this.storeRaType),e.set(i.d,this.dateFunction.start()),e.set(i.l,this.dateFunction.end()),e}handleResponse(e){this.totalRecords=e.page.count}refreshOnGeoChange(){return!1}};return e.\u0275fac=function(t){return new(t||e)(s["\u0275\u0275directiveInject"](o.a,8),s["\u0275\u0275directiveInject"](m.a),s["\u0275\u0275directiveInject"](d.a),s["\u0275\u0275directiveInject"](c.a),s["\u0275\u0275directiveInject"](p.a),s["\u0275\u0275directiveInject"](p.a),s["\u0275\u0275directiveInject"](u.a))},e.\u0275cmp=s["\u0275\u0275defineComponent"]({type:e,selectors:[["adj-generic-list-component"]],viewQuery:function(e,t){var n;1&e&&s["\u0275\u0275viewQuery"](l.a,!0),2&e&&s["\u0275\u0275queryRefresh"](n=s["\u0275\u0275loadQuery"]())&&(t.paginatedList=n.first)},decls:2,vars:0,template:function(e,t){1&e&&(s["\u0275\u0275elementStart"](0,"p"),s["\u0275\u0275text"](1," generic-list-component works!\n"),s["\u0275\u0275elementEnd"]())},styles:[""]}),e=Object(a.b)([Object(r.a)()],e),e})()}}]);