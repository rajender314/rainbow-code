!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var a=Object.getOwnPropertyDescriptor(r,t);return a.get?a.get.call(n):a.value}})(e,t,n||e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var a=l(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o(this,n)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{oRfM:function(t,o,s){"use strict";s.r(o),s.d(o,"StoresPageModule",(function(){return J}));var c=s("ofXK"),m=s("3Pt+"),d=s("TEn/"),u=s("tyNb"),p=s("ERDq"),f=s("fXoL"),h=s("BD9Z"),v=s("KiGM"),S=s("eGxD"),g=s("CId/"),y=s("ecLg"),E=s("xE5a"),b=s("coUQ"),x=s("jrR7"),w=s("he5r"),k=s("BKks"),I=s("+Sl4"),_=s("N/Ph"),C=s("2Q4r");function O(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",17),f["\u0275\u0275text"](1),f["\u0275\u0275pipe"](2,"uppercase"),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"](2);f["\u0275\u0275advance"](1),f["\u0275\u0275textInterpolate2"](" ",f["\u0275\u0275pipeBind1"](2,2,"Total Records")," - ",n.totalRecords," ")}}var P=function(e){return["/rainbow/stores",e]};function j(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"ion-row",25),f["\u0275\u0275elementStart"](1,"ion-col",20),f["\u0275\u0275elementStart"](2,"div"),f["\u0275\u0275elementStart"](3,"div"),f["\u0275\u0275text"](4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"div",26),f["\u0275\u0275text"](6),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](7,"div",26),f["\u0275\u0275text"](8),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](9,"ion-col"),f["\u0275\u0275elementStart"](10,"div"),f["\u0275\u0275elementStart"](11,"div"),f["\u0275\u0275text"](12),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](13,"div",26),f["\u0275\u0275text"](14),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](15,"ion-col"),f["\u0275\u0275elementStart"](16,"div"),f["\u0275\u0275text"](17),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](18,"ion-col"),f["\u0275\u0275elementStart"](19,"div"),f["\u0275\u0275text"](20),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](21,"ion-col"),f["\u0275\u0275elementStart"](22,"div"),f["\u0275\u0275elementStart"](23,"div"),f["\u0275\u0275text"](24),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](25,"ion-col"),f["\u0275\u0275elementStart"](26,"div"),f["\u0275\u0275text"](27),f["\u0275\u0275pipe"](28,"date"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](29,"ion-col",21),f["\u0275\u0275elementStart"](30,"div",1),f["\u0275\u0275elementStart"](31,"ion-button",27),f["\u0275\u0275element"](32,"ion-icon",23),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e){var n=t.$implicit;f["\u0275\u0275property"]("routerLink",f["\u0275\u0275pureFunction1"](12,P,n.store_id)),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate"](n.store_name),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](n.outlet_id),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate1"]("Dhanush ID: ",n.dhanush_id,""),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate"](n.branch),f["\u0275\u0275advance"](2),f["\u0275\u0275textInterpolate"](n.outlet_id),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](n.market_name),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"](n.wd_id),f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate1"](" ",n.beat_name," "),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate1"](" ",f["\u0275\u0275pipeBind1"](28,10,n.updated_on)," ")}}function M(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"ion-grid",18),f["\u0275\u0275elementStart"](1,"ion-row",19),f["\u0275\u0275elementStart"](2,"ion-col",20),f["\u0275\u0275elementStart"](3,"span"),f["\u0275\u0275text"](4),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](5,"ion-col"),f["\u0275\u0275elementStart"](6,"span"),f["\u0275\u0275text"](7),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](8,"ion-col"),f["\u0275\u0275elementStart"](9,"span"),f["\u0275\u0275text"](10),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](11,"ion-col"),f["\u0275\u0275elementStart"](12,"span"),f["\u0275\u0275text"](13),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](14,"ion-col"),f["\u0275\u0275elementStart"](15,"span"),f["\u0275\u0275text"](16),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"ion-col"),f["\u0275\u0275elementStart"](18,"span"),f["\u0275\u0275text"](19),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](20,"ion-col",21),f["\u0275\u0275elementStart"](21,"span"),f["\u0275\u0275elementStart"](22,"ion-button",22),f["\u0275\u0275element"](23,"ion-icon",23),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](24,j,33,14,"ion-row",24),f["\u0275\u0275elementEnd"]()),2&e){var n=f["\u0275\u0275nextContext"]().results;f["\u0275\u0275advance"](4),f["\u0275\u0275textInterpolate"]("Store Name"),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"]("Branch"),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"]("Market Name"),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"]("WD ID"),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"]("Beat"),f["\u0275\u0275advance"](3),f["\u0275\u0275textInterpolate"]("Visited"),f["\u0275\u0275advance"](5),f["\u0275\u0275property"]("ngForOf",n)}}function R(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div",0),f["\u0275\u0275template"](1,O,3,4,"div",15),f["\u0275\u0275template"](2,M,25,7,"ion-grid",16),f["\u0275\u0275elementEnd"]()),2&e){var n=t.results,r=f["\u0275\u0275nextContext"]();f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",r.totalRecords),f["\u0275\u0275advance"](1),f["\u0275\u0275property"]("ngIf",n)}}var L,F,D,B,N=((L=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(s,t);var o=i(s);function s(){var t;return e(this,s),(t=o.apply(this,arguments)).filterBranchList=[],t.filterRaType=[],t.filterRaColor=[],t.filterBeatList=[],t.filterMarketList=[],t.filterMerchandiserList=[],t}return n(s,[{key:"ngOnInit",value:function(){r(l(s.prototype),"ngOnInit",this).call(this),this.searchInput=new m.e,this.storeFilter=new I.a,this.dateFunction=b.a.ALL_DURATION,this.status={value:!0,label:"Active",name:"status"}}},{key:"ngAfterViewInit",value:function(){this.refresh()}},{key:"getListConfig",value:function(){return{url:k.c.storeDetailList}}},{key:"isAutoReload",value:function(){return!1}},{key:"mapData",value:function(e){return e.selected=this.selectAll,e}},{key:"getParams",value:function(){var e=this.filterParameters();return this.paginatedList.setParams(e),this.paginatedList.refresh(),new Map}},{key:"clear",value:function(){this.searchInput.reset(),this.refresh()}},{key:"showStoreDetails",value:function(e,t){this.modalService.showModal({component:p.a,params:{mode:e,store:t,storeId:t.store_id,title:"Store Details"},cssClasses:[w.e]})}},{key:"getFilterParams",value:function(e){var t=this;for(var n in e)"branch"==n&&e[n].map((function(e){t.filterBranchList.push(e.branch)})),"RAType"==n&&e[n].map((function(e){t.filterRaType.push(e.name)})),"RAColor"==n&&e[n].map((function(e){t.filterRaColor.push(e.name)})),"Beat"==n&&e[n].map((function(e){t.filterBeatList.push(e.name)})),"MarketName"==n&&e[n].map((function(e){t.filterMarketList.push(e.name)})),"Merchandiser"==n&&e[n].map((function(e){t.filterMerchandiserList.push(e.name)}))}},{key:"showFilter",value:function(e){var t=this;this.modalService.showModal({component:y.a,params:{current:this.storeFilter,showStores:!0,title:"Store Filter",type:2},selectHandler:function(e){Object.keys(e).length?t.getFilterParams(e):(t.filterBranchList=[],t.filterBeatList=[],t.filterRaColor=[],t.filterRaType=[],t.filterMarketList=[],t.filterMerchandiserList=[]),t.selectAll=!1,t.refresh()},cssClasses:[w.e]})}},{key:"performSearch",value:function(){this.getParams()}},{key:"filterParameters",value:function(){var e=new Map;return console.log(this.searchInput.value),Object(x.l)(this.searchInput.value)&&e.set("search_key",this.searchInput.value),e.set("activity_id","111"),e.set("branch",this.filterBranchList),e.set("ra_type",this.filterRaType),e.set("ra_color",this.filterRaColor),e.set("beat_name",this.filterBeatList),e.set("market_name",this.filterMarketList),e.set("marchendiser_name",this.filterMerchandiserList),e.set(w.d,this.dateFunction.start()),e.set(w.l,this.dateFunction.end()),e}},{key:"exportVisits",value:function(e){var t=this;this.uiProvider.showActions({event:e,params:{options:[{label:"CSV",value:null,name:"status"},{label:"PDF",value:!0,name:"status"},{label:"PPT",value:!1,name:"status"}],selectedValue:this.status},selectHandler:function(e){t.status={value:e.value,label:e.label,name:"status"}}})}}]),s}(E.a)).\u0275fac=function(e){return T(e||L)},L.\u0275cmp=f["\u0275\u0275defineComponent"]({type:L,selectors:[["adj-store-list"]],features:[f["\u0275\u0275InheritDefinitionFeature"]],decls:29,vars:6,consts:[[1,"ion-padding-horizontal"],[1,"ion-text-right"],[1,"ion-no-padding"],[1,"ion-align-items-center"],["size","8"],[1,"white-bg","search-bar"],["name","search-outline",1,"mild"],["type","text","placeholder","Search with Store Name or Dhanush ID",3,"formControl"],["size","small","fill","outline",1,"srch_clear",3,"click"],["size","small",3,"fill","click"],["name","funnel-outline","slot","start"],["size","small","fill","outline",3,"click"],["name","calendar-outline","slot","start"],[3,"config","lgTemplate","mapFn","onContent"],["storeTemplate",""],["class","ion-padding-bottom mild small-font",4,"ngIf"],["class","ion-no-padding adjoint-data-grid mat-elevation-z2 boder-box white-bg",4,"ngIf"],[1,"ion-padding-bottom","mild","small-font"],[1,"ion-no-padding","adjoint-data-grid","mat-elevation-z2","boder-box","white-bg"],[1,"grid-header","sticky-header"],["size","2"],["size","auto"],["fill","clear",1,"invisible"],["name","ellipsis-vertical-outline","slot","icon-only"],["class","white-bg ion-align-items-center",3,"routerLink",4,"ngFor","ngForOf"],[1,"white-bg","ion-align-items-center",3,"routerLink"],[1,"small-font","mild",2,"margin-top","4px"],["color","dark","fill","clear"]],template:function(e,t){if(1&e&&(f["\u0275\u0275elementStart"](0,"div"),f["\u0275\u0275elementStart"](1,"div",0),f["\u0275\u0275elementStart"](2,"ion-grid"),f["\u0275\u0275elementStart"](3,"ion-row"),f["\u0275\u0275elementStart"](4,"ion-col"),f["\u0275\u0275elementStart"](5,"div",1),f["\u0275\u0275elementStart"](6,"ion-grid",2),f["\u0275\u0275elementStart"](7,"ion-row",3),f["\u0275\u0275elementStart"](8,"ion-col",4),f["\u0275\u0275elementStart"](9,"div",5),f["\u0275\u0275element"](10,"ion-icon",6),f["\u0275\u0275element"](11,"input",7),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](12,"ion-col",0),f["\u0275\u0275elementStart"](13,"ion-button",8),f["\u0275\u0275listener"]("click",(function(){return t.performSearch()})),f["\u0275\u0275text"](14,"Search "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](15,"ion-button",8),f["\u0275\u0275listener"]("click",(function(){return t.clear()})),f["\u0275\u0275text"](16,"Clear"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](17,"ion-col"),f["\u0275\u0275elementStart"](18,"div",1),f["\u0275\u0275elementStart"](19,"ion-button",9),f["\u0275\u0275listener"]("click",(function(e){return t.showFilter(e)})),f["\u0275\u0275element"](20,"ion-icon",10),f["\u0275\u0275text"](21," filter "),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](22,"ion-button",11),f["\u0275\u0275listener"]("click",(function(e){return t.showDateOptions(e)})),f["\u0275\u0275element"](23,"ion-icon",12),f["\u0275\u0275text"](24),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](25,"rainbow-body"),f["\u0275\u0275elementStart"](26,"adjoint-paginated-list",13),f["\u0275\u0275listener"]("onContent",(function(e){return t.handleResponse(e)})),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275template"](27,R,3,2,"ng-template",null,14,f["\u0275\u0275templateRefExtractor"])),2&e){var n=f["\u0275\u0275reference"](28);f["\u0275\u0275advance"](11),f["\u0275\u0275property"]("formControl",t.searchInput),f["\u0275\u0275advance"](8),f["\u0275\u0275property"]("fill",t.storeFilter&&t.storeFilter.isNotEmpty()?"solid":"outline"),f["\u0275\u0275advance"](5),f["\u0275\u0275textInterpolate1"](" ",t.dateFunction.label," "),f["\u0275\u0275advance"](2),f["\u0275\u0275property"]("config",t.paginatedListConfig)("lgTemplate",n)("mapFn",t.mapData)}},directives:[d.k,d.x,d.h,d.m,m.c,m.o,m.f,d.d,_.a,C.a,c.NgIf,c.NgForOf,d.M,u.i],pipes:[c.UpperCasePipe,c.DatePipe],styles:[".srch_clear[_ngcontent-%COMP%]{float:left}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-moz-placeholder{font-size:14px!important}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{font-size:14px!important}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::-webkit-input-placeholder{font-size:14px!important}"]}),L),T=f["\u0275\u0275getInheritedFactory"](N),z=[{path:"",component:(F=function(){function t(n){e(this,t),this.orgService=n,this.config={title:"Stores",subtitle:"Snapshot of the Stores for your Region"}}return n(t,[{key:"ngOnInit",value:function(){this.orgService.myIndex=""}}]),t}(),F.\u0275fac=function(e){return new(e||F)(f["\u0275\u0275directiveInject"](h.a))},F.\u0275cmp=f["\u0275\u0275defineComponent"]({type:F,selectors:[["adj-stores"]],decls:9,vars:1,consts:[[1,"ion-no-border","header-border"],[1,"ion-no-border"],["slot","end"],[3,"config"]],template:function(e,t){1&e&&(f["\u0275\u0275elementStart"](0,"ion-header",0),f["\u0275\u0275elementStart"](1,"ion-toolbar",1),f["\u0275\u0275elementStart"](2,"ion-title"),f["\u0275\u0275element"](3,"adj-organisation"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](4,"ion-buttons",2),f["\u0275\u0275element"](5,"adj-user-profile"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementStart"](6,"ion-content"),f["\u0275\u0275elementStart"](7,"adj-page",3),f["\u0275\u0275element"](8,"adj-store-list"),f["\u0275\u0275elementEnd"](),f["\u0275\u0275elementEnd"]()),2&e&&(f["\u0275\u0275advance"](7),f["\u0275\u0275property"]("config",t.config))},directives:[d.l,d.F,d.D,v.a,d.e,S.a,d.i,g.a,N],styles:[""]}),F)},{path:":id",component:p.a}],A=((D=function t(){e(this,t)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:D}),D.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||D)},imports:[[u.j.forChild(z)],u.j]}),D),G=s("LkjY"),V=s("kmnG"),K=s("NFeN"),U=s("qFsG"),q=s("1jcm"),H=s("bSwM"),J=((B=function t(){e(this,t)}).\u0275mod=f["\u0275\u0275defineNgModule"]({type:B}),B.\u0275inj=f["\u0275\u0275defineInjector"]({factory:function(e){return new(e||B)},imports:[[c.CommonModule,m.i,d.G,A,G.a,m.t,V.d,K.a,U.c,q.a,H.b]]}),B)}}])}();